<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Wind" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="记录生活点滴">
<meta property="og:type" content="website">
<meta property="og:title" content="Wind">
<meta property="og:url" content="http://shalian123.github.io/page/4/index.html">
<meta property="og:site_name" content="Wind">
<meta property="og:description" content="记录生活点滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wind">
<meta name="twitter:description" content="记录生活点滴">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Wind </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Wind</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">细节在于观察，成功在于积累。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/14/多尺度Gabor滤波器提取彩色图像边缘/" itemprop="url">
                  多尺度Gabor滤波器提取彩色图像边缘
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-14T18:17:23+08:00" content="2017-06-14">
              2017-06-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/图像处理/" itemprop="url" rel="index">
                    <span itemprop="name">图像处理</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/14/多尺度Gabor滤波器提取彩色图像边缘/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/14/多尺度Gabor滤波器提取彩色图像边缘/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="一、-多尺度Gabor滤波算法的基本原理和实现思路"><a href="#一、-多尺度Gabor滤波算法的基本原理和实现思路" class="headerlink" title="一、    多尺度Gabor滤波算法的基本原理和实现思路"></a>一、    多尺度Gabor滤波算法的基本原理和实现思路</h4><p>由于Gabor特征对光照、姿态具有一定的鲁棒性，Gabor特征具有良好的空间局部性和方向选择性，可以很好的描述图像的纹理信息，因此许多算法都采用Gabor特征作为识别特征。<br>该算法仅对图像中部分关键特征点进行Gabor变换，并将这些特征点位置为顶点、以其Gabor变换系数为顶点属性、以其关键点位置关系为边属性的属性图，从而将问题转化为图匹配问题。通过合理的选择特征点的位置，弹性图可以很好地同时对关键局部特征及其它们之间的关系进行建模，从而既利用了图像亮度分布特征，又利用了结构信息。GWN方法从最佳描述的角度，通过一个优化过程完全自动地确定特征位置及其相应的小波参数，并最终用这些参数作为描述来进行人脸识别。但GWN是一种基于参数优化的建模方法，计算复杂度很高。GFC算法的基本思想是在粗略对齐图像的前提下，逐像素计算每个像素点的多方向、多尺度Gabor变换特征，形成Gabor特征的表示，然后进一步用Fisher判别分析法提取特征，为了解决逐像素Gabor特征维数过高的问题，Liu采用了简单的下采样处理方法。AdaGabor算法采用AdaBoost算法对高维Gabor特征进行选择的降维，该方法采用机器学习的方法更加客观地利用Gabor特征，从而能在有效降维的同时提高识别性能。<br>Gabor小波与人类视觉系统中简单细胞的视觉刺激响应非常相似。它在提取目标的局部空间和频率域信息方面具有良好的特性。虽然Gabor小波本身并不能构成正交基，但在特定参数下可构成紧框架。Gabor小波对于图像的边缘敏感，能够提供良好的方向选择和尺度选择特性，而且对于光照变化不敏感,能够提供对光照变化良好的适应性。上述特点使Gabor小波被广泛应用于视觉信息理解。二维Gabor小波变换[15]是在时频域进行信号分析处理的重要工具，其变换系数有着良好的视觉特性和生物学背景，因此被广泛应用于图像处理、模式识别等领域。与传统的傅立叶变换相比，Gabor小波变换具有良好的时频局部化特性。即非常容易地调整Gabor滤波器的方向、基频带宽及中心频率从而能够最好的兼顾信号在时空域和频域中的分辨能力；Gabor小波变换具有多分辨率特性即变焦能力。即采用多通道滤波技术，将一组具有不同时频域特性的Gabor小波应用于图像变换，每个通道都能够得到输入图像的某种局部特性，这样可以根据需要在不同粗细粒度上分析图像。此外，在特征提取方面，Gabor小波变换与其它方法相比：一方面其处理的数据量较少，能满足系统的实时性要求；另一方面，小波变换对光照变化不敏感，且能容忍一定程度的图像旋转和变形，当采用基于欧氏距离进行识别时，特征模式与待测特征不需要严格的对应，故能提高系统的鲁棒性。<br>无论从生物学的角度还是技术的角度，Gabor特征都有很大的优越性。Jones和Palmer的研究表明，在基本视觉皮层里的简单细胞的感受野局限在很小的空域范围内，并且高度结构化。Gabor变换所采用的核（Kernels）与哺乳动物视觉皮层简单细胞2D感受野剖面（Profile）非常相似，具有优良的空间局部性和方向选择性，能够抓住图像局部区域内多个方向的空间频率（尺度）和局部性结构特征。这样，Gabor分解可以看作一个对方向和尺度敏感的有方向性的显微镜。同时，二维Gabor函数也类似于增强边缘以及峰、谷、脊轮廓等底层图像特征，这相当于增强了被认为是面部关键部件的眼睛、鼻子、嘴巴等信息，同时也增强了诸于黑痣、酒窝、伤疤等局部特征从而使得在保留总体人脸信息的同时增强局部特性成为可能。<br>从图像处理的角度来看，Gabor特征有如下好处：<br>（1）Gabor核函数由于去掉了直流分量，因此对局部光照的变化不敏感，常常被用在要求对光照有适应性的场合；<br>（2）Gabor滤波结果可以反映图像不同尺度、不同方向上的灰度分布信息。一般说来，大尺度滤波可以反映全局性较强的信息，同时可以掩盖图像中噪声的影响；小尺度可以反映比较精细的局部结构，但容易受到噪声影响。<br>小波核函数在空域和频域上都有一定的局域性，这使得其对平移、拉伸、旋转和尺度变换都具有一定的鲁棒性。虽然平移变换对复向量的相位有一定影响，但在人脸识别这个问题中，平移对结果的影响是要考虑的，Gabor特征仍然具有很好的刻画特性。正是由于Gabor特征的这些特性，使得其在识别中得到了非常广泛的应用。</p>
<p>二维Gabor函数：<br><img src="http://ols4zt49w.bkt.clouddn.com/1497435908%281%29.png" alt=""></p>
<p>v的取值决定了Gabor滤波的波长，u的取值表示Gabor核函数的方向，K表示总的方向数。参数 决定了高斯窗口的大小，这里取σ=pi/3(可调)。程序中取3个频率，即尺度（v=0, 1, 2），16个方向（即K=16，u＝0, 1, … ,15），共48个Gabor核函数。从而获得较好的小波表征和辨别效果。<br>   Gabor变换与Gabor内核卷积为：<br><img src="http://ols4zt49w.bkt.clouddn.com/1497435962%281%29.png" alt=""><br>设的幅值和相位分别为组合不同尺度和方向的，构成图像在位置处的Gabor特征矢量。<br>定义Gabor特征和在不考虑相位差时的相似性为：<br><img src="http://ols4zt49w.bkt.clouddn.com/1497435968%281%29.png" alt=""><br>在提取人脸图像的Gabor特征时，通常采用多个在不同尺度和方向上的Gabor滤波器组成滤波器组，并根据图像的特点和神经生理学的结论来选择参数。通常研究采用共包括8个方向和5个尺度的Gabor滤波器组，使滤波器的带宽约为1倍频程。(在此题中采用3尺度，16方向)<br>由于Gabor特征具有良好的空间局部性和方向选择性，而且对光照、姿态具有一定的鲁棒性，因此在人脸识别中获得了成功的应用。然而，大部分基于Gabor特征的人脸识别算法中,只应用了Gabor幅值信息，而没有应用相位信息，主要原因是Gabor相位信息随着空间位置呈周期性变化，而幅值的变化相对平滑而稳定。所以本论文将输入图像依次与滤波器组的各个滤波器进行卷积，并取其幅值作为输出，即<br><img src="http://ols4zt49w.bkt.clouddn.com/1497435977%281%29.png" alt=""><br>设通过40个滤波器得到Gabor特征的维数高达 ，计算量很大，且由于Gabor特征在相邻像素间是高度相关和冗余的，所以通常只需要稀疏的提取部分节点上的Gabor特征。</p>
<h4 id="二、-自选示例图像，并说明选择原则"><a href="#二、-自选示例图像，并说明选择原则" class="headerlink" title="二、    自选示例图像，并说明选择原则"></a>二、    自选示例图像，并说明选择原则</h4><p>在这里，我选用了lena的图片，主要考虑到为了突出Gabor的优点，所以选了一张：局部光照的变化不敏感，有局部细节结构的图。<br><img src="http://ols4zt49w.bkt.clouddn.com/1497437101%281%29.png" alt=""></p>
<h4 id="三、-所编写程序对示例图像的运算结果"><a href="#三、-所编写程序对示例图像的运算结果" class="headerlink" title="三、    所编写程序对示例图像的运算结果"></a>三、    所编写程序对示例图像的运算结果</h4><p>在这里，我采用的多尺度Gabor滤波器运行结果如图：<br><img src="http://ols4zt49w.bkt.clouddn.com/1497436718%281%29.png" alt=""></p>
<p>为了突出优点，通过比较其他不同算子。<br>主要比较prewitt算子和canny算子，比较结果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/1497436859%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1497437029%281%29.png" alt=""></p>
<h4 id="四、-基于运算结果，对比分析所编写程序的适用场合"><a href="#四、-基于运算结果，对比分析所编写程序的适用场合" class="headerlink" title="四、    基于运算结果，对比分析所编写程序的适用场合"></a>四、    基于运算结果，对比分析所编写程序的适用场合</h4><p>通过比较，不难发现：<br>Prewitt算子,检测方法对灰度渐变和噪声较多的图像处理效果较好。但边缘较宽，而且间断点多。<br>canny算法,虽然能检测到一定的弱边缘，间断点较少，但是对一些灰度变化较小的边缘没有检测到。（眼睛等）<br>Gabor算法,对图像的边缘检测对噪声具有更好的鲁棒性，边缘的断裂点更少，对边缘的检测更加准确。<br>因此：Gabor特征对光照、姿态具有一定的鲁棒性，Gabor小波对于图像的边缘敏感，能够提供良好的方向选择和尺度选择特性，而且对于光照变化不敏感,能够提供对光照变化良好的适应性。上述特点使Gabor小波被广泛应用于视觉信息理解。</p>
<h4 id="五、-matlab程序清单及重要函数与语句的注释说明"><a href="#五、-matlab程序清单及重要函数与语句的注释说明" class="headerlink" title="五、    matlab程序清单及重要函数与语句的注释说明"></a>五、    matlab程序清单及重要函数与语句的注释说明</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">I=imread(&apos;lena.bmp&apos;); </div><div class="line">I=rgb2gray(I);</div><div class="line"></div><div class="line">figure;</div><div class="line">imshow(I);</div><div class="line">[height width ]=size(I);</div><div class="line">J=zeros(height,width); %初始化</div><div class="line"></div><div class="line">%u=16;</div><div class="line">v=3; %尺度</div><div class="line">for u=0:15   %orientations 0-15  %方向</div><div class="line">   </div><div class="line"></div><div class="line">sigma = pi/3;%pi*sqrt(2^(-v/2-1));%pi*2;   %参数可调，此处采用π/3</div><div class="line">sigma_2 = sigma^2;</div><div class="line"></div><div class="line">kv = pi*2^(-v/2-1);</div><div class="line">phiu = u*pi/16; %采样方向</div><div class="line"></div><div class="line">sigma_rule = 3*sigma/kv;    %3 sigma rule</div><div class="line"></div><div class="line">kjx = kv*cos(phiu);</div><div class="line">kjy = kv*sin(phiu);</div><div class="line"></div><div class="line">for x = -sigma_rule:sigma_rule</div><div class="line">    for y = -sigma_rule:sigma_rule</div><div class="line">        gaussian_kernal = kv^2/sigma_2*exp(-kv^2*(x^2+y^2)/(2*sigma_2)); %gaussian kernal function</div><div class="line">        </div><div class="line">        if (abs(x)&lt;=sigma_rule &amp; abs(y)&lt;=sigma_rule)</div><div class="line">            gabor_real(x+sigma_rule+1,y+sigma_rule+1) = gaussian_kernal * (cos(kjx*x+kjy*y)-exp(-sigma_2/2));</div><div class="line">            gabor_imag(x+sigma_rule+1,y+sigma_rule+1) = gaussian_kernal * sin(kjx*x+kjy*y);</div><div class="line">        else</div><div class="line">            gabor_real(x+sigma_rule+1,y+sigma_rule+1) = 0;</div><div class="line">            gabor_imag(x+sigma_rule+1,y+sigma_rule+1) = 0;</div><div class="line">        end</div><div class="line"></div><div class="line">    end</div><div class="line">end</div><div class="line"></div><div class="line">Imgabout1 = conv2(I,double(gabor_imag),&apos;same&apos;);%返回相同大小的二维卷积的虚部</div><div class="line">Regabout1 = conv2(I,double(gabor_real),&apos;same&apos;);%实部</div><div class="line">gabout1 = Regabout1;</div><div class="line"></div><div class="line">     J=J+gabout1;</div><div class="line">    end</div><div class="line"></div><div class="line">J=J/16;</div><div class="line">for i=1:height</div><div class="line">    for j=1:width</div><div class="line">        if (J(i,j)&lt;-5)</div><div class="line">            J(i,j)=0;</div><div class="line">        else J(i,j)=1;</div><div class="line">        end</div><div class="line">    end</div><div class="line">end</div><div class="line">G=[J-min(min(J))]*255/[max(max(J))-min(min(J))];  %归一化，再标准化</div><div class="line">G=uint8(G);</div><div class="line">figure,imshow(G);</div><div class="line"></div><div class="line">J=medfilt2(J); %使用默认的3×3邻域执行矩阵A的中值滤波。</div><div class="line">figure,imshow(J);</div></pre></td></tr></table></figure>
<p>补充：后来有尝试了其他类似的图片，效果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/1497437341.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1497437353%281%29.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/06/linux下搭建qt编译环境常遇到的问题及解决/" itemprop="url">
                  linux下搭建qt编译环境常遇到的问题及解决
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-06T18:49:14+08:00" content="2017-06-06">
              2017-06-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/06/linux下搭建qt编译环境常遇到的问题及解决/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/06/linux下搭建qt编译环境常遇到的问题及解决/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>简要概括以下步骤：<br>一、下载QT版本以及gcc</p>
<p>二、解压，安装，编译，这个网上教程很多，我是参考的迅为的开发板使用手册。<br><strong>这里重点是补充报错及修复:</strong><br>1.没有安装<strong>g++</strong>,  <strong>如果你是一开始安装新的linux系统定会有这样问题</strong>， 自己<code>apt-get install g++</code>处理下。</p>
<p>2.没有相关的配置的库支持，可以用<code>apt-get isntall build-essential</code> 添加下载库支持</p>
<p>3.运行qt时候会有报错：Qt编译错误“GL/gl.h:No such file or directory或者提示找不到GL等。<br><strong>解决</strong>：这是由于系统中没有安装OpenGL库导致的，于是在控制台中输入以下命令安装OpenGL库及其工具：<code>apt-get install libgl1-mesa-dev libglu1-mesa-dev freeglut3-dev</code> 即可。</p>
<p>三，注意配置下qt的编译器和qt版本。具体根据自己安装的目录来吧。<br>（一般在/usr/bin/<strong>g++</strong>）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/03/linux输入登陆密码正确，闪回登陆界面，无法登陆/" itemprop="url">
                  linux输入登陆密码正确，闪回登陆界面，无法登陆
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-03T20:13:25+08:00" content="2017-06-03">
              2017-06-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/03/linux输入登陆密码正确，闪回登陆界面，无法登陆/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/03/linux输入登陆密码正确，闪回登陆界面，无法登陆/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近遇到一个头疼的问题，在登陆linux系统时输入密码正确，但却老是闪回登陆界面，无法登陆。我参考了网上的方法，却仍然发现走了一些弯路，主要网上有的解释太过简略或者有点局限，甚至还是错的。在此，我结合我解决的过程，主要做个总结。</p>
<h5 id="产生原因"><a href="#产生原因" class="headerlink" title="产生原因"></a>产生原因</h5><p>问题的原因：主目录下的.Xauthority文件拥有者变成了root，从而以用户登陆的时候无法都取.Xauthority文件 。<br><strong>注意：这里的主目录是你登陆的用户，不是root用户</strong><br><strong>说明：</strong>Xauthority，是<strong>startx</strong>脚本记录文件。Xserver启动时，读文件~/.Xauthority,读入对应其display 的记录。当一个需要显示的客户程序启动调用XOpenDisplay()也读这个文 件，并把找到的magic code 发送给 Xserver。当Xserver验证这个magic code正确以后，就同意连接啦。观察startx脚本也可以看到，每次startx 运行，都在调用xinit以前使用了xauth的add命令添加了一个新的记录到~/.Xauthority，用来这次运行X使用认证。(<strong>注意：一般sudo startx后就这样不能登陆了</strong>)</p>
<h5 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h5><p>1.在需要输入密码的登陆界面，按下ctrl+alt+F1组合键，进入tty1终端<br><img src="http://ols4zt49w.bkt.clouddn.com/1496493167%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1496492971%281%29.png" alt=""><br>2.输入登陆ubuntu时的用户名和密码，在tty1终端出现登陆成功的提示，这里我的用户名是topeet，默认进入当前用户主目录（我的是/home/topeet）,可以用pwd命令查看，若不是，则切换至：<br>cd  或者<br>cd /home/topeet/ 注意：我这里的用户名是topeet,根据自己的实际情况更改。<br><img src="http://ols4zt49w.bkt.clouddn.com/1496493023%281.png" alt=""><br>3.执行命令，将Xauthority的拥有者改为用户topeet<br>$ sudo chown topeet:topeet .Xauthority<br>备注：本人的用户名为topeet，因此 chown后面跟了topeet:topeet若为其他用户名修改成相应的名称即可）<br>(我的用户和用户组都是topeet,如果你不知道可以用<code>more /etc/group</code>及<code>more /etc/passwd</code>查看)<br><img src="http://ols4zt49w.bkt.clouddn.com/1496493060%281.png" alt=""><br>4.然后在终端提示符后输入：$ ls .Xauthority -l<br>正确无误后显示如下：-rw——- 1 topeet topeet 51  May 22 23:14 .Xauthority<br>此时拥有者已经变为用户。<br><img src="http://ols4zt49w.bkt.clouddn.com/1496493097%281.png" alt=""><br>5.按下ctrl + alt + F7切换回图形登陆界面登陆即可。<br><strong>易错点：</strong><br>一开始我是切换到root用户下修改.Xauthority文件的拥有者的，但是试了几次都没成功，在次特别强调按下ctrl+alt+F1组合键，进入tty1终端后登入你想登入的账户，而不是root用户。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/02/逐行读写字符串数组到文本txt文件/" itemprop="url">
                  逐行读写字符串数组到文本txt文件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-02T14:31:30+08:00" content="2017-06-02">
              2017-06-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/02/逐行读写字符串数组到文本txt文件/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/02/逐行读写字符串数组到文本txt文件/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在c和c++代码的操作中，我们有时会用到一些文件操作，为了方便以后的调用，我在此总结了一些简单的文件读写操作，并依次展示效果。</p>
<h4 id="C语言方式"><a href="#C语言方式" class="headerlink" title="C语言方式"></a>C语言方式</h4><p>在代码中，主要用到了以下几个头文件：为了方便，此处将几次代码的头文件汇到了一起，你可以直接复制过去。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include&lt;iostream&gt; //c++的</div><div class="line">#include&lt;stdio.h&gt;  //c的</div><div class="line">#include&lt;string&gt;</div><div class="line">#include&lt;fstream&gt; //c++文件读写操作函数</div><div class="line">using namespace std;</div></pre></td></tr></table></figure></p>
<h5 id="fprintf-函数将字符串数组写入到txt文件中"><a href="#fprintf-函数将字符串数组写入到txt文件中" class="headerlink" title="fprintf()函数将字符串数组写入到txt文件中"></a>fprintf()函数将字符串数组写入到txt文件中</h5><p>此处的fprintf()函数：输出函数(格式化输出数据至文件)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">   FILE *fp;</div><div class="line">errno_t err;</div><div class="line">char * name[] = &#123; &quot;file1&quot;, &quot;file2&quot;, &quot;file3&quot;, &quot;file4&quot;, &quot;file5&quot; &#125;;</div><div class="line">if((err=fopen_s(&amp;fp,&quot;E://test.txt&quot;, &quot;w&quot;))!=0)</div><div class="line">   printf(&quot;the file was not opened\n&quot;);</div><div class="line">      </div><div class="line">for (int i = 0; i &lt; 5; i++)</div><div class="line">&#123;</div><div class="line">	fprintf(fp, &quot;%s\n&quot;, name[i]);</div><div class="line">&#125;</div><div class="line">   </div><div class="line">fclose(fp);</div></pre></td></tr></table></figure></p>
<p>此处，补充一点知识，在vs里经常遇到：<br><strong>fopen的用法是: fp  = fopen(filename, “w”)。<br>而对于fopen_s来说，还得定义另外一个变量errno_t  err，然后err = fopen_s(&amp;fp, filename, “w”)。<br>返回值的话，对于fopen来说，打开文件成功的话返回文件指针（赋值给fp），打开失败则返回NULL值；<br>对于fopen_s来说，打开文件成功返回0，失败返回非0。</strong></p>
<p>最终效果如图：<br><img src="http://ols4zt49w.bkt.clouddn.com/51N_X%281B6$EIC$W~ORIV%25%7DT.png" alt=""></p>
<h5 id="使用fputs函数逐行写入文本"><a href="#使用fputs函数逐行写入文本" class="headerlink" title="使用fputs函数逐行写入文本"></a>使用fputs函数逐行写入文本</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">   char *InputStr = &quot;that is ok&quot;;</div><div class="line">FILE* fp;</div><div class="line">errno_t err;</div><div class="line">if ((err = fopen_s(&amp;fp, &quot;C://1.txt&quot;, &quot;wt&quot;)) != 0)</div><div class="line">	printf(&quot;the file was not opened\n&quot;);</div><div class="line">//FILE* fp = fopen(&quot;C:\\1.txt&quot;, &quot;wt&quot;);</div><div class="line">//if (fp != NULL)</div><div class="line">//&#123;</div><div class="line">	fseek(fp, 0, SEEK_END);</div><div class="line">	fputs(InputStr, fp);</div><div class="line">	fputs(&quot;\r\n&quot;, fp);</div><div class="line">	fclose(fp);</div><div class="line">//&#125;</div></pre></td></tr></table></figure>
<p>最终效果：<br><img src="http://ols4zt49w.bkt.clouddn.com/M_8VG%5BRJM5%7D%5BPA95%7B6%254V%60A.png" alt=""></p>
<h5 id="利用fscanf对文件进行格式化输入，读取文件中的数据"><a href="#利用fscanf对文件进行格式化输入，读取文件中的数据" class="headerlink" title="利用fscanf对文件进行格式化输入，读取文件中的数据"></a>利用fscanf对文件进行格式化输入，读取文件中的数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">   int i = 0;</div><div class="line">FILE *fp;</div><div class="line">fopen_s(&amp;fp,&quot;E://test.txt&quot;, &quot;r&quot;);</div><div class="line">char  name[6][10] = &#123;0&#125;;//如果没有初始化，最后没有读取的几位将会乱码。整个字符数组输出，如未初始化，则没有写入确定值的元素是一些不确定值，输出可能就是一堆乱码了。</div><div class="line"></div><div class="line">while (!feof(fp))</div><div class="line">&#123;</div><div class="line">	fscanf_s(fp, &quot;%s&quot;, name[i],sizeof(name[i]));</div><div class="line">	printf(&quot;%s\n&quot;, name[i]);</div><div class="line">	i++;</div><div class="line">&#125;</div><div class="line">fclose(fp);</div></pre></td></tr></table></figure>
<p><strong>注意：整个字符数组输出，如未初始化，则没有写入确定值的元素是一些不确定值，输出可能就是一堆乱码了。</strong><br>效果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/K4FYVZ5$%29OIJ@_%6007%7DJ%60~%5B5.png" alt=""></p>
<h4 id="C-语言方式"><a href="#C-语言方式" class="headerlink" title="C++语言方式"></a>C++语言方式</h4><p>在看具体实例前，我先简要介绍一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#include &lt;fstream&gt;  </div><div class="line">ofstream         //文件写操作 内存写入存储设备   </div><div class="line">ifstream         //文件读操作，存储设备读区到内存中  </div><div class="line">fstream          //读写操作，对打开的文件可进行读写操作</div></pre></td></tr></table></figure></p>
<p>下面主要列举两个例子，一个是从文件里读取数据，然后控制台输出；另一个是读取一个文件数据，并将数据写入另一个文件，即复制。</p>
<h5 id="c-读文件"><a href="#c-读文件" class="headerlink" title="c++读文件"></a>c++读文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">   ifstream in(&quot;E://test.txt&quot;);</div><div class="line">string filename;</div><div class="line">string line;</div><div class="line"></div><div class="line">if (in) // 有该文件</div><div class="line">&#123;</div><div class="line">	while (getline(in, line)) // line中不包括每行的换行符</div><div class="line">	&#123;</div><div class="line">		cout &lt;&lt; line &lt;&lt; endl;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">else // 没有该文件</div><div class="line">&#123;</div><div class="line">	cout &lt;&lt; &quot;no such file&quot; &lt;&lt; endl;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/79%25%25GY~48KKPO%5B3LT%28K%5BO1U.png" alt=""></p>
<h5 id="c-文件间数据的复制"><a href="#c-文件间数据的复制" class="headerlink" title="c++文件间数据的复制"></a>c++文件间数据的复制</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">/*实现读取文件file1，写入到文件file2，实现复制*/</div><div class="line">void fileCopy(char *file1, char *file2)</div><div class="line">&#123;</div><div class="line">	// 最好对file1和file2进行判断</div><div class="line"></div><div class="line">	ifstream in(file1);</div><div class="line">	ofstream out(file2);</div><div class="line">	string filename;</div><div class="line">	string line;</div><div class="line"></div><div class="line">	while (getline(in, line))</div><div class="line">	&#123;</div><div class="line">		out &lt;&lt; line &lt;&lt; endl;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    fileCopy(&quot;E://1.txt&quot;, &quot;E://2.txt&quot;);</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/ZPH%28KD016GH%25HN%7B%7D~5T%28DJM.png" alt=""><br><strong>补充</strong>：这里只是简单的文件操作，关于<strong>c++</strong>的文件读写详解可以参考：<br><strong>C++</strong>文件读写详解（ofstream,ifstream,fstream） <a href="http://blog.csdn.net/kingstar158/article/details/6859379" target="_blank" rel="external">http://blog.csdn.net/kingstar158/article/details/6859379</a><br>里面还包含一些二进制文件，缓存与同步等。<br><strong>扩展：</strong><br>C++的输入输出分为三种：<br>(1)基于控制台的I/O，头文件iostream<br>(2)基于文件的I/O, 头文件fstream<br>(3)基于字符串的I/O,头文件sstream<br>具体参考博客：<a href="http://www.cnblogs.com/gamesky/archive/2013/01/09/2852356.html" target="_blank" rel="external">http://www.cnblogs.com/gamesky/archive/2013/01/09/2852356.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/01/c-11-新特性/" itemprop="url">
                  c++11新特性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-01T21:50:54+08:00" content="2017-06-01">
              2017-06-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/01/c-11-新特性/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/01/c-11-新特性/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>C++</strong>面试中经常会被问到的一个问题是:了解哪些 C++11 新特性，下面总结几条实用的新特性,注意以下不是全部，只是部分，在以后学习的过程中继续补充。</p>
<h5 id="1-右值的引用"><a href="#1-右值的引用" class="headerlink" title="1.右值的引用"></a>1.右值的引用</h5><p>传统的 <strong>C++</strong> 引用（现在称为左值引用）使标识符关联到左值。左值是一个表示数据的表达式（如变量名或解除引用的指针）。C++11 新增了右值引用，使用 <strong>&amp;&amp; </strong>表示。右值则包括字面常量、诸如 x + y 表达式以及返回值的函数。记住一点，<strong>左值与右值的根本区别在于能否获取内存地址，而能否赋值不是区分的依据</strong>。<br>下面简要总结一下<strong>引用和指针的区别</strong>：<br>两者都是与地址相关的概念。<strong>引用是变量的别名，而指针则是变量的地址</strong><br>区别如下：<br>==1.指针是一个实体（分配内存），而引用仅是个别名；<br>2.引用只能在定义时被初始化一次，之后不可变；指针可变；引用“从一而终”，指针可以“见异思迁”；<br>3.引用没有const，指针有const，const的指针不可变；<br>4.引用不能为空，指针可以为空；<br>5.“sizeof 引用”得到的是所指向的变量(对象)的大小，而“sizeof 指针”得到的是指针本身的大小；<br>从上面可以看出引用更接近 const 指针。==<br>引入右值引用的主要目的之一是实现移动语义，下面展开来谈==</p>
<h5 id="2-移动语句"><a href="#2-移动语句" class="headerlink" title="2.移动语句"></a>2.移动语句</h5><p>为方便理解移动语句，考虑下面的示例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">vector&lt;string&gt; allcpas(const vector&lt;string&gt; &amp;vs)</div><div class="line">&#123;</div><div class="line">    vector&lt;string&gt; temp;</div><div class="line">    // 将 vs 复制给 temp</div><div class="line">    return temp;</div><div class="line">&#125;</div><div class="line">vector&lt;string&gt; vstr;</div><div class="line">// vstr 是包含 20000 个 string 的向量，每个元素有 1000 个字符</div><div class="line">vector&lt;string&gt; vstr_copy1(vstr);</div><div class="line">vector&lt;string&gt; vstr_copy2(allcps(vstr));    // #2</div></pre></td></tr></table></figure></p>
<p>对语句# 2， <code>allcps</code> 将返回值 temp 复制给临时形参变量，再将该形参复制给<code>vstr_copy2</code> 。编译器对 vstr 复制了两次。这样显然很消耗资源。如果将对数据的所有权直接转让给 <code>vstr_copy2</code> ，显然会更好，对此我们只需要实现 vstr_copy2 的<strong>移动构造函数</strong>，在函数内部将调整临时变量的所有权，从而避免一次无意义的复制。移动语义实际上避免了移动原始数据，而只是修改了记录。</p>
<h5 id="3-基于范围的for循环"><a href="#3-基于范围的for循环" class="headerlink" title="3.基于范围的for循环"></a>3.基于范围的for循环</h5><p>对于内置数组已经包含 <code>begin()</code> 和 <code>end()</code> 的类和 STL 容器，基于范围的 for 循环可以简化为它们编写循环的工作。这种循环对数组或容器中的每个元素执行指定的操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">std::vector&lt;int&gt; vi(6);</div><div class="line">for (auto &amp;x : vi)</div><div class="line">    x = std::rand()</div></pre></td></tr></table></figure></p>
<p>x 依次为 vi 中的每个元素的引用，从而实现了对数组每个元素的修改。</p>
<h5 id="4-智能指针"><a href="#4-智能指针" class="headerlink" title="4.智能指针"></a>4.智能指针</h5><p>智能指针的出现很自然，其行为类似于指针的类对象，可以在离开对象周期使自动析构函数，释放动态申请的内存。<br>模板 <code>auto_ptr</code> 是 <strong>c++98</strong> 提供的解决方案，C++11 已将其摈弃，并提供了 unique_ptr ，shared_ptr 两种解决方案。<br>智能指针很多方面都类似于常规指针。例如，如果 ps 是一个智能指针对象，则可以对它执行解除引用操作（*ps）、用它来访问结构成员，将他赋值给相同类型的常规指针。将智能指针对象赋值给对另一个同类型的智能指针对象，将引起一个问题。看下面例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">auto_ptr&lt;string&gt; ps (new string(&quot;I reigned lonely as a cloud.&quot;));</div><div class="line">auto_ptr&lt;string&gt; vocation;</div><div class="line">vocation = ps;</div></pre></td></tr></table></figure></p>
<p>两个指针指向同一块内存，会造成程序试图删除同一个对象两次。避免这种问题，有如下思路：<br>1.建立所有权的概念，对于特定的指针，只能有一个智能指针对象可以拥有它。让赋值操作转让所有权。这就是用于 auto_ptr 和 unique_ptr 的策略。<br>2.创建智能更高的指针，跟踪引用计数特定对象的智能指针数。这称为引用计数。例如，赋值计数加1，过期时，计数减1。仅当最后一个指针过期时，才调用 delete。这是 shared_ptr 采用的策略。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/18/QT5-3-2连接Mysql老是失败！/" itemprop="url">
                  QT5.3.2连接Mysql老是失败！
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-18T17:00:13+08:00" content="2017-05-18">
              2017-05-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/05/18/QT5-3-2连接Mysql老是失败！/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/18/QT5-3-2连接Mysql老是失败！/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前在QT里一直用的文件型数据库sqlite,今天突然想试试在里面连接Mysql，结果却遇到了一个问题，问题如下：<br>在程序运行后，显示的驱动里明明有QMYSQL驱动，同时我也成功创建了一个mydata数据库，但是就是显示加载不了驱动。<br><img src="http://ols4zt49w.bkt.clouddn.com/1495098343%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1495098462%281%29.png" alt=""></p>
<p>网上的解决方案很多，大概有：<br>1.需要自己编译驱动。（qmysql.dlll,qmysqld.dll已经存在）<br>2.将mysql目录下lib中的libmysql.dll考到Qt安装目录bin中。<br>3.将plugins\sqldrivers文件夹拷贝到工程目录及其目标文件中。<br>结果都是一个效果，无效！！！不能不说网上有的回答并不全面或者说是牛头不对马嘴，也因此坑了我一个下午，最终得已解决，在此为了避免你们遇到跟我一样得问题，我在这里总结一下：</p>
<p>1.从Qt5.2版本开始，已经包含了MySQL驱动，不需要在手动编译了。你可以通过qDebug()&lt;&lt;QSqlDatabase::drivers()查看支持的驱动。</p>
<p><strong>2.还有一个很重要的是32位的MySQL对应32位的Qt。</strong></p>
<p>相信你们也发现了，解决方案很简单。由于<strong>我的版本是QT5.3,而且x86的，即32位的</strong>，虽然我的电脑是64位win10系统，但是在<strong>电脑上必须装32位的Mysq</strong>l。相信大家会有疑惑，64位的系统怎么能装32位的软件呢，但是奇葩的是竟然成功装上了，至少 mysql-5.5.27-win32.msi 可以。<br>接下来再将mysql目录下lib中的libmysql.dll考到Qt安装目录bin中。<br>在此编译运行，结果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/1495100021%281%29.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/15/QT网络编程之FTP/" itemprop="url">
                  QT网络编程之FTP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-15T14:33:15+08:00" content="2017-05-15">
              2017-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/05/15/QT网络编程之FTP/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/15/QT网络编程之FTP/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>FTP(文件传输协议)是一个主要用来<strong>浏览远程目录</strong>和<strong>传输文件</strong>的协议。FTP使用两个网络连接，一个用来发送命令，一个用来输出数据。FTP协议有一个状态，并且需要客户端在传输文件之前发送一些命令。FTP客户端建立一个连接，并且在整个会话期间<strong>一直保持打开</strong>。在每个会话期间可以发生多个传输。</p>
<p><strong>注意：</strong>在QT5之前，为了方便网络编程，Qt 提供了 Network 模块。<strong>该模块包含了许多类</strong>，例如：<strong>QFtp类</strong> - <strong>能够更加轻松使用 FTP 协议进行网络编程</strong>。但是，从 Qt5.x 之后，Qt Network 发生了很大的变化，不再导出 QFtp 和 QUrlInfo 类，改用了 QNetworkAccessManager。</p>
<p>在QT5中，使用 QNetworkAccessManager类实现FTP与前面的http应用十分相似，只需要在QUrl对象中设置好主机的地址，用户名，密码等，然后使用get()、put()等函数完成文件的获取和上传。<strong>注意：因为Qt5不再支持QFtp类,需要的话得重现编译.所以只能在根目录上传下载。如果想要实现其它功能，如：cd()改变服务器的工作目录到指定目录；list()列出ftp服务器上指定目录的内容，默认列出当前目录的内容；等，就只能用QFtp。</strong></p>
<p>虽然在QT5中QFtp类被废除了，在QT5中不能直接使用该类，但是在<strong>QT5的兼容性扩展模块QtFtp中包含了支持Qt5的QFtp类。</strong><br>QFtp 类提供了一个 FTP 协议的客户端实现，具有以下特点：<br>1.<strong>非阻塞行为，QFtp异步工作</strong>。如果无法立即执行操作，函数仍将立即返回，并且该操作将被调度以供以后执行。调度操作的结果通过信号报告，这种方法依赖于事件循环操作。</p>
<p>2.命令ID。可以调度的操作（也被称为“命令”）有：connectToHost()、login()、close()、list()、cd()、get()、put()、remove()、mkdir()、rmdir()、rename() 和 rawCommand()。<strong>当每一个命令被执行时，QFtp都会使用该命令ID发射commandStarted()和commandFinished()信号。</strong></p>
<p>3.数据传输进度指示。当<strong>有数据传输时</strong>，QFtp会发射信号( <strong>QFtp::dataTransferProgress()</strong>,QNetworkReply::downloadProgress()和QNetworkReply::uploadProgress() ),可以关联这些信号到QProgressBar::setProgress()或者QProgressDialog::setProgresss()上。</p>
<p>4.QIODevice支持。该类支持对QIODevice进行上传和下载。</p>
<p>这里我主要采用第二种方法，即采用QFtp类。我挑重点讲：<br><strong>连接</strong><br>在此处可以直接在ui界面里初始化，然后添加信号槽。ui界面如图：<br><img src="http://ols4zt49w.bkt.clouddn.com/34$LEQ9JRY3J5S~%5DCD08L14.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">// 连接按钮</div><div class="line">void MainWindow::on_connectButton_clicked()</div><div class="line">&#123;</div><div class="line">    ui-&gt;fileList-&gt;clear();</div><div class="line">    currentPath.clear();</div><div class="line">    isDirectory.clear();</div><div class="line">    ui-&gt;progressBar-&gt;setValue(0);</div><div class="line">    ui-&gt;progressBar_2-&gt;setValue(0);</div><div class="line">    ftp = new QFtp(this);</div><div class="line">    //每当一个命令被执行时，QFtp都会使用该命令ID发射commandStartedcommunity()和commandFinished()信号</div><div class="line">    connect(ftp, &amp;QFtp::commandStarted, this,</div><div class="line">            &amp;MainWindow::ftpCommandStarted);</div><div class="line">    connect(ftp, &amp;QFtp::commandFinished,</div><div class="line">            this, &amp;MainWindow::ftpCommandFinished);</div><div class="line"></div><div class="line">    //listInfo()信号在执行完list()命令时发射</div><div class="line">    connect(ftp, &amp;QFtp::listInfo, this, &amp;MainWindow::addToList);</div><div class="line"></div><div class="line">    //当有数据传输时，QFTP会发射信号（QFtp::dataTransferProgress(),QNetworkReply::downloadProgress()和QNetworkReply::uploadProgress()）</div><div class="line">   /* connect(ftp, &amp;QFtp::dataTransferProgress,</div><div class="line">            this, &amp;MainWindow::updateDataTransferProgress);</div><div class="line">    connect(ftp, &amp;QFtp::dataTransferProgress,</div><div class="line">            this, &amp;MainWindow::updateDataTransferProgress_2);*/</div><div class="line"></div><div class="line">    QString ftpServer = ui-&gt;ftpServerLineEdit-&gt;text();</div><div class="line">    QString userName = ui-&gt;userNameLineEdit-&gt;text();</div><div class="line">    QString passWord = ui-&gt;passWordLineEdit-&gt;text();</div><div class="line">    ftp-&gt;connectToHost(ftpServer, 21);</div><div class="line">    ftp-&gt;login(userName, passWord);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当然，也可以请求连接服务器，代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">ftp = new QFtp(this);</div><div class="line"></div><div class="line">ftp-&gt;connectToHost(&quot;wscloudy.com&quot;);//指定端口连接到FTP服务器主机，默认端口号21</div><div class="line">ftp-&gt;login(&quot;user&quot;, &quot;8677&quot;);//指定用户名和密码登陆到FTP服务器</div><div class="line">ftp-&gt;get(&quot;sha.txt&quot;);//从服务器下载指定文件</div><div class="line">ftp-&gt;close();</div><div class="line">connect(ftp, &amp;QFtp::commandStarted,</div><div class="line">        this, &amp;MainWindow::ftpCommandStarted);</div><div class="line">connect(ftp, &amp;QFtp::commandFinished,</div><div class="line">        this, &amp;MainWindow::ftpCommandFinished);</div></pre></td></tr></table></figure></p>
<p><strong>下载</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">void MainWindow::on_downloadButton_clicked()</div><div class="line">&#123;</div><div class="line">    connect(ftp, &amp;QFtp::dataTransferProgress,</div><div class="line">            this, &amp;MainWindow::updateDataTransferProgress);</div><div class="line">    // 注意：因为文件名称可能是中文，所以在使用get()函数前需要进行编码转换</div><div class="line">    QString fileName = ui-&gt;fileList-&gt;currentItem()-&gt;text(0);</div><div class="line">    QString name = QLatin1String(fileName.toUtf8());</div><div class="line">    file = new QFile(fileName);//根据要下载的文件的名称创建本地文件</div><div class="line">    if (!file-&gt;open(QIODevice::WriteOnly)) &#123;</div><div class="line">        delete file;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    ui-&gt;downloadButton-&gt;setEnabled(false);</div><div class="line">    ftp-&gt;get(name, file);//文件下载</div><div class="line">&#125;</div><div class="line">//下载进度更新</div><div class="line">void MainWindow::updateDataTransferProgress(qint64 readBytes,qint64 totalBytes)</div><div class="line">&#123;</div><div class="line">    ui-&gt;progressBar-&gt;setMaximum(totalBytes);</div><div class="line">    ui-&gt;progressBar-&gt;setValue(readBytes);</div><div class="line">   // ui-&gt;progressBar_2-&gt;setValue(0);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>上传</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//上传按钮</div><div class="line">void MainWindow::on_uploadButton_clicked()</div><div class="line">&#123;</div><div class="line">    connect(ftp, &amp;QFtp::dataTransferProgress,</div><div class="line">            this, &amp;MainWindow::updateDataTransferProgress_2);</div><div class="line"></div><div class="line">    file = new QFile (&quot;E:/ftpshare/shalian.txt&quot;);</div><div class="line">    ftp-&gt;put(file,&quot;shalian.txt&quot;); //将我电脑E盘下的文件上传至服务器</div><div class="line">    ui-&gt;uploadButton-&gt;setEnabled(false);</div><div class="line"></div><div class="line">&#125;</div><div class="line">//上传进度更新</div><div class="line">void MainWindow::updateDataTransferProgress_2(qint64 readBytes,qint64 totalBytes)</div><div class="line">&#123;</div><div class="line">    ui-&gt;progressBar_2-&gt;setMaximum(totalBytes);</div><div class="line">    ui-&gt;progressBar_2-&gt;setValue(readBytes);</div><div class="line">    //ui-&gt;progressBar-&gt;setValue(0);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>注意</strong>：一开始我在学校用自己的电脑配置搭建了一个ftp服务器，但是由于是校园局域网，外网进来需要路由允许穿越。(当然我可没法要求校园网络管理员实现)，因此借助了公司同事服务器上的ftp服务器，在他的路由上设置了允许我的穿进。<br>本文参考了：<br><a href="http://blog.csdn.net/liang19890820/article/details/53318906" target="_blank" rel="external">http://blog.csdn.net/liang19890820/article/details/53318906</a><br><a href="http://blog.csdn.net/liang19890820/article/details/53188182" target="_blank" rel="external">http://blog.csdn.net/liang19890820/article/details/53188182</a><br><a href="http://blog.csdn.net/sinat_29173167/article/details/54601643" target="_blank" rel="external">http://blog.csdn.net/sinat_29173167/article/details/54601643</a><br>欢迎一起讨论交流！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/15/c-动态申请二维数组并释放/" itemprop="url">
                  c++动态申请一维、二维数组并释放
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-15T08:59:59+08:00" content="2017-05-15">
              2017-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/05/15/c-动态申请二维数组并释放/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/15/c-动态申请二维数组并释放/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在平时写代码的过程中，常常会需要动态开辟一个二维数组，具体的行和列不再是常量，之前遇到了总是容易忘记，现在特地整理一下。同时将一维数组也整理了一下。<br>c++中有三种方法来动态申请多维数组</p>
<p><strong>(1)C中的malloc/free</strong></p>
<p><strong>(2)C++中的new/delete</strong></p>
<p><strong>(3)STL容器中的vector</strong></p>
<p><strong>第一种malloc/free</strong><br>动态开辟一维数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">动态开辟一维数组</div><div class="line">void dynamicCreate1Array()</div><div class="line">&#123;</div><div class="line">	int m;</div><div class="line">	int i;</div><div class="line">	int *p;</div><div class="line">    </div><div class="line">	printf(&quot;请输入开辟的数组长度：&quot;);</div><div class="line">	scanf(&quot;%d&quot;,&amp;m);</div><div class="line">	p = (int*)malloc(sizeof(int)*m);//动态开辟</div><div class="line"></div><div class="line">	printf(&quot;请输入数据：&quot;);</div><div class="line">	for(i = 0; i &lt; m ; i++)</div><div class="line">		scanf(&quot;%d&quot;,&amp;p[i]);</div><div class="line"></div><div class="line">    printf(&quot;输出数据：\n&quot;);</div><div class="line">	for(i = 0; i &lt; m; i++)</div><div class="line">		printf(&quot;%d &quot;,p[i]);</div><div class="line">	free(p);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>动态开辟二维数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">void dynamicCreate2Array()</div><div class="line">&#123;</div><div class="line">	int m,n;</div><div class="line">	int i,j;</div><div class="line">	int **p;</div><div class="line"></div><div class="line">    printf(&quot;请输入数组行和列：&quot;);</div><div class="line">	scanf(&quot;%d%d&quot;,&amp;m,&amp;n);</div><div class="line"></div><div class="line">	p = (int**)malloc(sizeof(int*)*m); //开辟行</div><div class="line"></div><div class="line">	for(i = 0; i &lt; m; i++)</div><div class="line">	&#123;</div><div class="line">		*(p+i) = (int*)malloc(sizeof(int)*n);//开辟列</div><div class="line">	&#125;</div><div class="line">	//输入数据</div><div class="line">	printf(&quot;请输入数：&quot;);</div><div class="line">    for(i = 0 ; i &lt; m;i++)</div><div class="line">		for(j = 0; j &lt; n;j++)</div><div class="line">			scanf(&quot;%d&quot;,&amp;p[i][j]);</div><div class="line">    </div><div class="line">	//输出数据</div><div class="line">	for(i = 0 ; i &lt; m;i++)</div><div class="line">	&#123;</div><div class="line">		for(j = 0; j &lt; n;j++)</div><div class="line">		&#123;</div><div class="line">		   printf(&quot;%3d &quot;,p[i][j]);</div><div class="line">		&#125;</div><div class="line">		printf(&quot;\n&quot;);</div><div class="line">	&#125;</div><div class="line">	//释放开辟的二维空间</div><div class="line">	for(i = 0; i &lt; m;i++)</div><div class="line">		free(*(p+i));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>第二种：new/delete</strong><br>1.动态开辟一维数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">void DynamicCreate1Array()</div><div class="line">&#123;</div><div class="line">	int len;</div><div class="line">	</div><div class="line">	cout&lt;&lt;&quot;请输入长度：&quot;;</div><div class="line">	cin&gt;&gt;len;</div><div class="line">	</div><div class="line">	int *p = new int[len];</div><div class="line">	</div><div class="line">	cout&lt;&lt;&quot;请输入数据：&quot;;</div><div class="line">    for(int i = 0; i &lt; len; i++)</div><div class="line">		cin&gt;&gt;p[i];</div><div class="line">	</div><div class="line">	cout&lt;&lt;&quot;输出数据：&quot;&lt;&lt;endl;</div><div class="line">	for(i = 0; i &lt; len; i++)</div><div class="line">		cout&lt;&lt;setw(4)&lt;&lt;p[i];</div><div class="line">	</div><div class="line">	delete[] p;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.动态开辟二维数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">void DynamicCreate2Array()</div><div class="line">&#123;</div><div class="line">	int m, n;</div><div class="line">	cout &lt;&lt; &quot;请输入行和列：&quot;;</div><div class="line">	cin &gt;&gt; m &gt;&gt; n;</div><div class="line"></div><div class="line">	//动态开辟空间</div><div class="line">	int **p = new int*[m]; //开辟行</div><div class="line">	for (int i = 0; i &lt; m; i++)</div><div class="line">		p[i] = new int[n]; //开辟列</div><div class="line"></div><div class="line">	cout &lt;&lt; &quot;请输入数据：&quot;;</div><div class="line">	for (int i = 0; i &lt; m; i++)</div><div class="line">	for (int j = 0; j &lt; n; j++)</div><div class="line">		cin &gt;&gt; p[i][j];</div><div class="line"></div><div class="line">	cout &lt;&lt; &quot;输出数据：&quot; &lt;&lt; endl;</div><div class="line">	for (int i = 0; i &lt; m; i++)</div><div class="line">	&#123;</div><div class="line">		for (int j = 0; j &lt; n; j++)</div><div class="line">			cout &lt;&lt; setw(3) &lt;&lt; p[i][j];</div><div class="line">		cout &lt;&lt; endl;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//释放开辟的资源</div><div class="line">	for (int i = 0; i &lt; m; i++)</div><div class="line">		delete[] p[i];</div><div class="line">	delete[] p;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>第三种：STL中的vector</strong><br>动态开辟二维数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">void VectorCreate()</div><div class="line">&#123;</div><div class="line">	int m,n;</div><div class="line">	cout&lt;&lt;&quot;请输入行和列：&quot;;</div><div class="line">	cin&gt;&gt;m&gt;&gt;n;</div><div class="line">	</div><div class="line">	//注意下面这一行：vector &lt;int后两个 &quot;&gt; &quot;之间要有空格！否则会被认为是重载 &quot;&gt; &gt; &quot;。 </div><div class="line">    vector&lt;vector&lt;int&gt; &gt; p(m,vector&lt;int&gt;(n));</div><div class="line">	</div><div class="line">	cout&lt;&lt;&quot;请输入数据：&quot;;</div><div class="line">	for(int i = 0 ; i &lt; m ; i++)</div><div class="line">		for(int j = 0; j &lt; n; j++)</div><div class="line">			cin&gt;&gt;p[i][j];</div><div class="line">		</div><div class="line">	cout&lt;&lt;&quot;输出数据：&quot;&lt;&lt;endl;</div><div class="line">	for(int i = 0; i &lt; m; i++)</div><div class="line">	&#123;</div><div class="line">    	for(int j = 0; j &lt; n; j++)</div><div class="line">			cout&lt;&lt;setw(3)&lt;&lt;p[i][j];</div><div class="line">		cout&lt;&lt;endl;</div><div class="line">	&#125;</div><div class="line">			</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/05/QT实现简单的天气预报/" itemprop="url">
                  QT实现简单的天气预报
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-05T16:16:26+08:00" content="2017-05-05">
              2017-05-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/05/05/QT实现简单的天气预报/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/05/QT实现简单的天气预报/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Qt 进行网络访问的类是QNetworkAccessManager,QNetworkAccessManager类允许应用程序发送网络请求以及接受服务器的响应。事实上，Qt 的整个访问网络 API 都是围绕着这个类进行的。QNetworkAccessManager保存发送的请求的最基本的配置信息，包含了代理和缓存的设置。最好的是，这个 API 本身就是异步设计，这意味着我们不需要自己为其开启线程，以防止界面被锁死。<strong>（补充：Qt 的界面活动是在一个主线程中进行。网络访问是一个相当耗时的操作，如果整个网络访问的过程以同步的形式在主线程进行，则当网络访问没有返回时，主线程会被阻塞，界面就会被锁死，不能执行任何响应，甚至包括一个代表响应进度的滚动条都会被卡死在那里。）</strong>QNetworkAccessManager是使用信号槽来达到这一目的的。<br>在掌握了访问网络和json解析等，我在此简易做了一个天气预报，既添加了学习趣味，也算是一种检验吧。</p>
<h4 id="一、API"><a href="#一、API" class="headerlink" title="一、API"></a>一、API</h4><p>通过天气api获取当前天气，api网上有很多，我在此注册了一个 <a href="http://www.haoservice.com/" target="_blank" rel="external">http://www.haoservice.com/</a> 账号，可以免费申请数据，由于是体验用户，可以享受免费请求50次（调试的时候注意，如果调试访问超过50次就得花钱了）。<br>需要自己申请apikey,同时获取到的天气api数据是Jason格式的。<br><img src="http://ols4zt49w.bkt.clouddn.com/WX%7D@H%250$OFOPFI%5D$0%25AE901.png" alt=""></p>
<p><img src="http://ols4zt49w.bkt.clouddn.com/~@%28GSJZI@NMK%7BV~Y$YBOJUA.png" alt=""></p>
<p><strong>API发送请求</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">//发送请求</div><div class="line">void Widget::on_pushButton_clicked()</div><div class="line">&#123;</div><div class="line">    manage = new QNetworkAccessManager(this);</div><div class="line">    QNetworkRequest network_request;</div><div class="line"></div><div class="line"></div><div class="line">    /*设置发送数据*/</div><div class="line"></div><div class="line">   //QString cityName = &quot;杭州&quot;;</div><div class="line"></div><div class="line">   network_request.setUrl(QUrl(&quot;http://apis.haoservice.com/weather?cityname=%E6%9D%AD%E5%B7%9E&amp;key=4c08a10447eb435e98080000c50f3f77&amp;paybyvas=false&quot;));</div><div class="line"></div><div class="line"></div><div class="line">   /* 注意：当url里有中文或空格之类的，需要用一些在线转码工具进行url编码，这里纠结了很久*/</div><div class="line">   // network_request.setUrl(QUrl(QString(&quot; http://apis.haoservice.com/weather?cityname=1%&amp;key=4c08a10447eb435e98080000c50f3f77&amp;paybyvas=false&quot;).arg(cityName)));</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    /*发送get网络请求*/</div><div class="line">    manage-&gt;get(network_request);</div><div class="line"></div><div class="line">    /*建立connect，replyFinished为自定义槽函数，获取api发回来的天气信息（Jason）格式*/</div><div class="line">    connect(manage,SIGNAL(finished(QNetworkReply *)),this,SLOT( getReplyFinished(QNetworkReply *)) );</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在这里我一开始遇到了一个问题，很容易忽视，因为我的url中有中文的存在，每次访问都会失败，但是将网址输入浏览器却能有响应，这是因为浏览器会自动解析编码url，但是当你在代码中想访问请求时必须得编码，在此可以用在线编码软件，如下图：<br><img src="http://ols4zt49w.bkt.clouddn.com/url%E7%BC%96%E7%A0%81.png" alt=""></p>
<p><strong>获取API传回得数据</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">void Widget::getReplyFinished(QNetworkReply *reply)</div><div class="line">&#123;</div><div class="line">    if(reply-&gt;error()!= QNetworkReply::NoError)</div><div class="line">       qDebug() &lt;&lt; QStringLiteral(&quot;响应失败&quot;);</div><div class="line"></div><div class="line">    QByteArray bytes = reply-&gt;readAll();</div><div class="line">    QJsonParseError jsonError;</div><div class="line">    QJsonDocument document = QJsonDocument::fromJson(bytes,&amp;jsonError);</div><div class="line">    if (jsonError.error != QJsonParseError::NoError) &#123;</div><div class="line">            qDebug() &lt;&lt; QStringLiteral(&quot;解析Json失败&quot;);//此处可以验证是否获取到天气信息（json格式）</div><div class="line">            qDebug() &lt;&lt; bytes;//如果API响应的不是json格式的数据，则不用解析，直接输出</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">    QJsonObject data = document.object();</div><div class="line">    qDebug() &lt;&lt; &quot;天气Jason：&quot; &lt;&lt; data;</div><div class="line"></div><div class="line">    getTodayWeatherInfo(data);//获取当日天气信息</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//获取当日天气信息，即解析json</div><div class="line">void Widget::getTodayWeatherInfo(QJsonObject data)</div><div class="line">&#123;</div><div class="line">    QJsonObject today = data.value(&quot;result&quot;).toObject().value(&quot;today&quot;).toObject();</div><div class="line">    WeatherInfo todayInfo;</div><div class="line">    todayInfo.city = today.value(&quot;city&quot;).toString();//北京</div><div class="line">    todayInfo.date = today.value(&quot;date_y&quot;).toString();//2017年05月04日</div><div class="line">    todayInfo.week = today.value(&quot;week&quot;).toString();//星期</div><div class="line">    todayInfo.type = today.value(&quot;weather&quot;).toString();//阵雨</div><div class="line">    todayInfo.curTemp = today.value(&quot;temperature&quot;).toString();//温度</div><div class="line">    todayInfo.fengli = today.value(&quot;wind&quot;).toString();//风</div><div class="line"></div><div class="line"></div><div class="line">    qDebug() &lt;&lt; &quot;getTodayWeatherInfo:\n&quot; &lt;&lt;todayInfo.city&lt;&lt; todayInfo.date &lt;&lt; todayInfo.week &lt;&lt; todayInfo.type &lt;&lt; todayInfo.curTemp</div><div class="line">            &lt;&lt;todayInfo.fengli ;</div><div class="line"></div><div class="line">    QStringList todayInfoList;//在文本框里显示</div><div class="line">    todayInfoList &lt;&lt;todayInfo.city &lt;&lt; todayInfo.date + todayInfo.week &lt;&lt; todayInfo.type &lt;&lt; todayInfo.curTemp</div><div class="line">                   &lt;&lt; todayInfo.fengli ;</div><div class="line">    for(int i=0; i &lt; todayInfoList.size(); i++)</div><div class="line">    &#123;</div><div class="line">        ui-&gt;textBrowser-&gt;append(todayInfoList.at(i));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/8%7DPG7BQ76JQ%29R20%5DE%608%7D0B2.png" alt=""><br>返回的json数据如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;error_code&quot;: 0,</div><div class="line">    &quot;reason&quot;: &quot;成功&quot;,</div><div class="line">    &quot;result&quot;: &#123;</div><div class="line">        &quot;sk&quot;: &#123;</div><div class="line">            &quot;temp&quot;: &quot;25&quot;,</div><div class="line">            &quot;wind_direction&quot;: &quot;北风&quot;,</div><div class="line">            &quot;wind_strength&quot;: &quot;4级&quot;,</div><div class="line">            &quot;humidity&quot;: &quot;57&quot;,</div><div class="line">            &quot;time&quot;: &quot;16:34&quot;</div><div class="line">        &#125;,</div><div class="line">        &quot;today&quot;: &#123;</div><div class="line">            &quot;city&quot;: &quot;杭州&quot;,</div><div class="line">            &quot;date_y&quot;: &quot;2017年05月05日&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期五&quot;,</div><div class="line">            &quot;temperature&quot;: &quot;17~27&quot;,</div><div class="line">            &quot;weather&quot;: &quot;多云&quot;,</div><div class="line">            &quot;fa&quot;: &quot;01&quot;,</div><div class="line">            &quot;fb&quot;: &quot;01&quot;,</div><div class="line">            &quot;wind&quot;: &quot;西北风 3-4 级&quot;,</div><div class="line">            &quot;dressing_index&quot;: &quot;舒适&quot;,</div><div class="line">            &quot;dressing_advice&quot;: &quot;建议着长袖T恤、衬衫加单裤等服装。年老体弱者宜着针织长袖衬衫、马甲和长裤。&quot;,</div><div class="line">            &quot;uv_index&quot;: &quot;弱&quot;,</div><div class="line">            &quot;comfort_index&quot;: &quot;--&quot;,</div><div class="line">            &quot;wash_index&quot;: &quot;较适宜&quot;,</div><div class="line">            &quot;travel_index&quot;: &quot;较适宜&quot;,</div><div class="line">            &quot;exercise_index&quot;: &quot;较适宜&quot;,</div><div class="line">            &quot;drying_index&quot;: &quot;--&quot;</div><div class="line">        &#125;,</div><div class="line">        &quot;future&quot;: [&#123;</div><div class="line">            &quot;temperature&quot;: &quot;15~23&quot;,</div><div class="line">            &quot;weather&quot;: &quot;阴&quot;,</div><div class="line">            &quot;fa&quot;: &quot;02&quot;,</div><div class="line">            &quot;fb&quot;: &quot;01&quot;,</div><div class="line">            &quot;wind&quot;: &quot;东北风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期六&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170506&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;16~25&quot;,</div><div class="line">            &quot;weather&quot;: &quot;阴&quot;,</div><div class="line">            &quot;fa&quot;: &quot;02&quot;,</div><div class="line">            &quot;fb&quot;: &quot;03&quot;,</div><div class="line">            &quot;wind&quot;: &quot;东风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期日&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170507&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;17~22&quot;,</div><div class="line">            &quot;weather&quot;: &quot;阵雨&quot;,</div><div class="line">            &quot;fa&quot;: &quot;03&quot;,</div><div class="line">            &quot;fb&quot;: &quot;02&quot;,</div><div class="line">            &quot;wind&quot;: &quot;东南风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期一&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170508&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;17~24&quot;,</div><div class="line">            &quot;weather&quot;: &quot;多云&quot;,</div><div class="line">            &quot;fa&quot;: &quot;01&quot;,</div><div class="line">            &quot;fb&quot;: &quot;01&quot;,</div><div class="line">            &quot;wind&quot;: &quot;南风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期二&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170509&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;19~32&quot;,</div><div class="line">            &quot;weather&quot;: &quot;晴&quot;,</div><div class="line">            &quot;fa&quot;: &quot;00&quot;,</div><div class="line">            &quot;fb&quot;: &quot;00&quot;,</div><div class="line">            &quot;wind&quot;: &quot;西南风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期三&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170510&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;21~31&quot;,</div><div class="line">            &quot;weather&quot;: &quot;多云&quot;,</div><div class="line">            &quot;fa&quot;: &quot;01&quot;,</div><div class="line">            &quot;fb&quot;: &quot;04&quot;,</div><div class="line">            &quot;wind&quot;: &quot;西北风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期四&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170511&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;20~28&quot;,</div><div class="line">            &quot;weather&quot;: &quot;雷阵雨&quot;,</div><div class="line">            &quot;fa&quot;: &quot;04&quot;,</div><div class="line">            &quot;fb&quot;: &quot;01&quot;,</div><div class="line">            &quot;wind&quot;: &quot;西北风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期五&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170512&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;20~29&quot;,</div><div class="line">            &quot;weather&quot;: &quot;多云&quot;,</div><div class="line">            &quot;fa&quot;: &quot;01&quot;,</div><div class="line">            &quot;fb&quot;: &quot;00&quot;,</div><div class="line">            &quot;wind&quot;: &quot;西南风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期六&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170513&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;temperature&quot;: &quot;19~29&quot;,</div><div class="line">            &quot;weather&quot;: &quot;多云&quot;,</div><div class="line">            &quot;fa&quot;: &quot;01&quot;,</div><div class="line">            &quot;fb&quot;: &quot;01&quot;,</div><div class="line">            &quot;wind&quot;: &quot;西南风 微风&quot;,</div><div class="line">            &quot;week&quot;: &quot;星期日&quot;,</div><div class="line">            &quot;date&quot;: &quot;20170514&quot;</div><div class="line">        &#125;]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里我只解析了显示了today的一部分，并用文本框textbrowser里显示</p>
<h4 id="二、换肤"><a href="#二、换肤" class="headerlink" title="二、换肤"></a>二、换肤</h4><p>这里我主要设置了背景图片，并且想要达到点击换肤的效果。<br>widget设置显示背景图片我这里尝试了三种方法：<br>方法一：如果widget是顶层窗口（无父类的窗口),设置背景图片<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">/* 如果widget是顶层窗口（无父类的窗口),设置背景图片*/</div><div class="line">           //方法一：</div><div class="line">     /* QImage _image;</div><div class="line">      _image.load(&quot;:/image/images/UI1.png&quot;);</div><div class="line">      setAutoFillBackground(true);   // 这个属性一定要设置</div><div class="line">      QPalette pal(palette());</div><div class="line">      pal.setBrush(QPalette::Window, QBrush(_image.scaled(size(), Qt::IgnoreAspectRatio,</div><div class="line">                          Qt::SmoothTransformation)));</div><div class="line">      setPalette(pal);</div><div class="line">     */</div></pre></td></tr></table></figure></p>
<p>方法二：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">     // 方法二：</div><div class="line">/*QPalette palette;</div><div class="line">//palette.setColor(QPalette::Background, QColor(192,253,123));//设置背景颜色</div><div class="line">  palette.setBrush(QPalette::Background, QBrush(QPixmap(&quot;:/image/images/UI1.png&quot;)));</div><div class="line"></div><div class="line">      //上面一句相当于下面两句</div><div class="line">//pixmap.load(&quot;:/image/images/UI1.png&quot;);</div><div class="line">//palette.setBrush(QPalette::Background, QBrush(pixmap));</div><div class="line"></div><div class="line">  setPalette(palette);</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>方法三：利用QPainter的drawPixmap函数，这种方法只能用在paintEvent()函数中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">   //方法三：利用QPainter的drawPixmap函数，这种方法只能用在paintEvent()函数中</div><div class="line">void Widget::paintEvent(QPaintEvent *)</div><div class="line">&#123;</div><div class="line">    QPainter painter(this);</div><div class="line">   // QPixmap pixmap(&quot;:/image/images/UI.png&quot;);</div><div class="line">    painter.drawPixmap(0, 0, pixmap);//绘制UI</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里为了达到换肤的效果，我采用了第三种方法。同时初始背景图片</p>
<blockquote>
<p>pixmap.load(“:/image/images/UI0”); //初始背景图片<br>// resize(pixmap.size());//保留图片大小<br>uid=0;</p>
</blockquote>
<p>下面是简单的换肤程序：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//简单换肤</div><div class="line">void Widget::on_updateButton_clicked()</div><div class="line">&#123;</div><div class="line">    //选择UI的id</div><div class="line">    if(uid == 3)</div><div class="line">        uid = 0;</div><div class="line">    else</div><div class="line">        uid = uid + 1;</div><div class="line">    //拼凑成UI路径</div><div class="line">    QString UIpath = tr(&quot;:/image/images/UI%1&quot;).arg(uid);</div><div class="line">    //qDebug()&lt;&lt;UIpath;</div><div class="line">    //加载UI</div><div class="line">    pixmap.load(UIpath);</div><div class="line">    //产生paintEvent重绘UI</div><div class="line">    update();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.png" alt=""><br> 此处是由于在初始化时没有注释掉  <code>// resize(pixmap.size());//保留图片大小</code><br> 在注释掉后，界面明显有了改善：<br> <img src="http://ols4zt49w.bkt.clouddn.com/8$B$VNGGW%28%7DW~%29%259E@W%25X%7BR.png" alt=""><br> <img src="http://ols4zt49w.bkt.clouddn.com/G2@B9OIGUOBUCB%60_A%5BG0WWP.png" alt=""></p>
<h4 id="三、展望"><a href="#三、展望" class="headerlink" title="三、展望"></a>三、展望</h4><p>到此，我想实现的效果已经基本实现，所学的知识也有了检验，但是偶然在网上看到一个帖子，里面有一个更加完善的demo,在此我把它贴出，代码量不是太多，功能和我的差不多，但是他的布局和界面优化显示明显花了更大的功夫。详细代码参考这里：<a href="https://github.com/ghsxl/QT5-Weather" target="_blank" rel="external">github</a><br>最终的效果：<br><img src="http://ols4zt49w.bkt.clouddn.com/@%6037TE2%7B05ZAYR5%29VAQ%7B45O.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/23/QT之http网络编程，json访问应答/" itemprop="url">
                  QT之http网络编程，json访问应答
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-23T11:02:46+08:00" content="2017-04-23">
              2017-04-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/04/23/QT之http网络编程，json访问应答/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/23/QT之http网络编程，json访问应答/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>结合前面两篇文章《浅谈http之post与get的区别》和《QT之json》，本文重点尝试了如何在qt中通过http协议json格式请求和响应服务器的json格式，并解析。<br>本文的重点是客户端的编写，服务器用的是一个简易的http本地服务器。<br>服务器端的响应程序如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">void HttpServer::onRequest(HttpRequest* req, HttpResponse* resp)</div><div class="line">&#123;</div><div class="line">	//实现你的响应代码</div><div class="line">	QString reply  = tr(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Rokh Server Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;hello!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;);</div><div class="line">    resp-&gt;setHeader(&quot;Content-Type&quot;, &quot;text/html&quot;);</div><div class="line">    resp-&gt;setHeader(&quot;Content-Type&quot;,&quot;application/json&quot;);</div><div class="line">	resp-&gt;setStatus(200);</div><div class="line"></div><div class="line">    resp-&gt;end(QString(&quot;&#123;&quot;</div><div class="line">                      &quot;\&quot;name\&quot;:\&quot;QT\&quot;,&quot;</div><div class="line">                      &quot;\&quot;version\&quot;:5,&quot;</div><div class="line">                      &quot;\&quot;windows\&quot;:true&quot;</div><div class="line">                      &quot;&#125;&quot;)</div><div class="line"></div><div class="line">);</div><div class="line">    //resp-&gt;end(QString(&quot;Test ok!&quot;));</div><div class="line">	return;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>客户端的程序：在mainwindow.cpp中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line"> &#123;</div><div class="line">    QNetworkRequest req;//构造一个请求</div><div class="line">    req.setUrl(QUrl(&quot;http://localhost:58890/post&quot;));</div><div class="line">    req.setHeader(QNetworkRequest::ContentTypeHeader, QVariant(&quot;application/json&quot;));</div><div class="line">    QNetworkAccessManager *manager = new QNetworkAccessManager(this);</div><div class="line">    /***json数据**********/</div><div class="line">    QJsonObject json;</div><div class="line">    json.insert(&quot;name&quot;, &quot;Qt&quot;);</div><div class="line">    json.insert(&quot;version&quot;, 7);</div><div class="line">    json.insert(&quot;windows&quot;, true);</div><div class="line"></div><div class="line">    QJsonDocument document;</div><div class="line">    document.setObject(json);</div><div class="line">    QByteArray byte_array = document.toJson(QJsonDocument::Compact);</div><div class="line"></div><div class="line">    //QNetworkReply *reply = manager.post(req, QByteArray(&quot;&#123;&#125;&quot;));</div><div class="line">    //QNetworkReply *reply = manager-&gt;post(req,byte_array);//发送请求，并会获得一个reply的响应对象</div><div class="line">    manager-&gt;post(req,byte_array);//发送请求，使用 json 参数直接传递</div><div class="line"></div><div class="line"></div><div class="line">    //开启一个局部的事件循环，等待响应结束，</div><div class="line">    //退出因为请求的过程是异步的，所以此时使用 QEventLoop 开启一个局部的事件循环，等待响应结束，事件循环退出。</div><div class="line">    //注意：开启事件循环的同时，程序界面将不会响应用户操作（界面被阻塞）。</div><div class="line">   // QEventLoop ev;</div><div class="line">   //连接槽信号</div><div class="line">   // QObject::connect(manager, &amp;QNetworkAccessManager::finished, &amp;ev, &amp;QEventLoop::quit);</div><div class="line">    connect(manager, SIGNAL(finished(QNetworkReply *)), this, SLOT(replyFinished(QNetworkReply *)));</div><div class="line"></div><div class="line">   // ev.exec();</div><div class="line">   //connect(reply, SIGNAL(finished()), &amp;ev, SLOT(quit()));</div><div class="line">   // ev.exec(QEventLoop::ExcludeUserInputEvents);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">MainWindow::~MainWindow()</div><div class="line">&#123;</div><div class="line">    delete ui;</div><div class="line">&#125;</div><div class="line">//槽函数，获取响应的内容，调用 readAll()，由于上述的 POST 请求返回的数据为 Json 格式，将响应结果先转化为 Json，然后再对其解析</div><div class="line">void MainWindow::replyFinished(QNetworkReply *reply)</div><div class="line">&#123;</div><div class="line">    if(reply-&gt;error()!= QNetworkReply::NoError)</div><div class="line">         qDebug() &lt;&lt; QStringLiteral(&quot;响应失败&quot;);</div><div class="line"></div><div class="line">    // 获取响应信息，响应的内容可以是 HTML 页面，也可以是字符串、Json、XML等</div><div class="line">    QByteArray bytes = reply-&gt;readAll();</div><div class="line"></div><div class="line">    QJsonParseError jsonError;</div><div class="line">    QJsonDocument doucment = QJsonDocument::fromJson(bytes, &amp;jsonError);// 转化为 JSON文档</div><div class="line">    if (jsonError.error != QJsonParseError::NoError) &#123;</div><div class="line">        qDebug() &lt;&lt; QStringLiteral(&quot;解析Json失败&quot;);</div><div class="line">        qDebug() &lt;&lt; bytes;//如果服务器里响应的不是json格式的数据，则不用解析，直接输出</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // 解析Json</div><div class="line">    if (doucment.isObject()) &#123;              // JSON 文档为对象</div><div class="line">        QJsonObject obj = doucment.object();// 转化为对象</div><div class="line">        QJsonValue value;</div><div class="line">        if (obj.contains(&quot;name&quot;)) &#123;</div><div class="line">            value = obj.take(&quot;name&quot;);      //Removes key from the object.</div><div class="line">            if (value.isString()) &#123;         //判断 value 是否为字符串</div><div class="line"></div><div class="line">                QString data = value.toString();// 将 value 转化为字符串</div><div class="line"></div><div class="line">                qDebug() &lt;&lt; endl &lt;&lt; data;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if (obj.contains(&quot;version&quot;)) &#123;</div><div class="line">            value = obj.take(&quot;version&quot;);//Removes key from the object.</div><div class="line">            if(value.isDouble())</div><div class="line">            &#123;</div><div class="line">                int data = value.toVariant().toInt();</div><div class="line">                qDebug() &lt;&lt; data;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if (obj.contains(&quot;windows&quot;)) &#123;</div><div class="line">            value = obj.take(&quot;windows&quot;);//Removes key from the object.</div><div class="line">            if(value.isBool())</div><div class="line">            &#123;</div><div class="line">                bool flag = value.toBool();</div><div class="line">                qDebug() &lt;&lt; flag ;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    else</div><div class="line">    &#123;</div><div class="line">        qDebug() &lt;&lt; &quot;error, shoud json object&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //检测响应状态码,200 OK，表示请求已成功，请求所希望的响应头或数据体将随此响应返回</div><div class="line">    QVariant variant = reply-&gt;attribute(QNetworkRequest::HttpStatusCodeAttribute);</div><div class="line">    if (variant.isValid())</div><div class="line">        qDebug() &lt;&lt; variant.toInt();</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>程序中请求是以json对象格式请求的，所以需要先使用 tojson()将QJsonDocument类文件转换成文本文件</p>
<blockquote>
<p>QByteArray byte_array = document.toJson(QJsonDocument::Compact);//转换成了字节数组</p>
</blockquote>
<p>然后发送请求<code>manager-&gt;post(req,byte_array);</code>//发送请求</p>
<p>槽函数，获取响应的内容，调用 readAll()，由于上述的 POST 请求返回的数据为 Json 格式，将响应结果先转化为Json（fromjson函数），然后再对其解析。</p>
<p>结果解析如下：<br><img src="http://ols4zt49w.bkt.clouddn.com/1492952805%281%29.png" alt=""><br>服务器端响应的json格式数据被解析并输出。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/3812b31bb051f8196c5029e9d8b44aed2e73e718.jpg"
               alt="shalian" />
          <p class="site-author-name" itemprop="name">shalian</p>
          <p class="site-description motion-element" itemprop="description">记录生活点滴</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">55</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">68</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shalian123" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/3329000660/home?wvr=5" target="_blank" title="新浪微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  新浪微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-pinterest"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.baidu.com/" title="百度" target="_blank">百度</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://harmansecurity.cn/" title="harman" target="_blank">harman</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.codecooler.tech/" title="DoRin" target="_blank">DoRin</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shalian</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"shalian"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
