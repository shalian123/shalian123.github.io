<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Wind" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="记录生活点滴">
<meta property="og:type" content="website">
<meta property="og:title" content="Wind">
<meta property="og:url" content="http://shalian123.github.io/index.html">
<meta property="og:site_name" content="Wind">
<meta property="og:description" content="记录生活点滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wind">
<meta name="twitter:description" content="记录生活点滴">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Wind </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Wind</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">细节在于观察，成功在于积累。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/21/c-的纯虚函数和虚函数/" itemprop="url">
                  c++的纯虚函数和虚函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-09-21T10:36:28+08:00" content="2017-09-21">
              2017-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/09/21/c-的纯虚函数和虚函数/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/21/c-的纯虚函数和虚函数/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在学java，在学习的过程中发现和之前的c++由好多类似但又不同的地方，而且十分容易混淆。因此做了一些简单的笔记，避免混淆。<br>首先，我借用网上的一篇博文,简单区分一下c++的虚函数和纯虚函数。<br><a href="http://blog.csdn.net/foreverhuylee/article/details/34108837" target="_blank" rel="external">C++中纯虚函数和虚函数的区</a><br>如下：<br>首先：强调一个概念<br>   定义一个函数为虚函数，不代表该函数为不被实现的函数<br>   ==定义他为虚函数是为了允许用基类的指针来调用子类的这个函数==  </p>
<p>定义一个函数为纯虚函数，才代表函数没有被实现<br>   ==定义他是为了实现一个接口，起到一个规范的作用，规范继承这个类的程序员必须实现这个函数。== </p>
<p>（<br> 纯虚函数就是父类不给定义，子类必须要实现这个函数，不然子类不能被具象化</p>
<p>虚函数的话父类也要给定义，因为子类可以不实现这个虚函数而沿用父类的虚函数</p>
<p>）<br>对继承的影响：<br>       普通的类（没有虚函数，纯虚函数）就可以被继承，而且工作的相当好<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">*****************************************************************************************************************************************</div><div class="line">关于实例化一个类：  </div><div class="line">有纯虚函数的类是不可能生成类对象的，如果没有纯虚函数则可以。比如：  </div><div class="line">class  CA  </div><div class="line">&#123;  </div><div class="line">public:  </div><div class="line">       virtual  void  fun()  =  0;    //  说明fun函数为纯虚函数  </div><div class="line">       virtual  void  fun1();  </div><div class="line">&#125;;  </div><div class="line"> </div><div class="line">class  CB  </div><div class="line">&#123;  </div><div class="line">public:  </div><div class="line">     virtual  void  fun();  </div><div class="line">     virtual  void  fun1();  </div><div class="line">&#125;;  </div><div class="line"> </div><div class="line">//  CA，CB类的实现  </div><div class="line">...  </div><div class="line"> </div><div class="line">void  main()  </div><div class="line">&#123;  </div><div class="line">       CA  a;      //  不允许，因为类CA中有纯虚函数  </div><div class="line">       CB  b;      //  可以，因为类CB中没有纯虚函数  </div><div class="line">       ...  </div><div class="line">&#125;  </div><div class="line">**************************************************************************************</div></pre></td></tr></table></figure></p>
<p>对“<strong>虚函数是为了允许用基类的指针来调用子类</strong>”这句话的理解：<br>设Parent是父类，Child是子类<br>Parent parent；<br>Child Child；<br>父类中有function1和function2这两个函数，<br>并且function2是虚函数。<br>当我们在程序中，使用<br><code>Parent *p;  // 定义一个基类指针</code><br><code>p=&amp;child;         // 指向继承类对象     ，或者用 p=new Child（）这样的形式，</code><br>这里就是用基类的指针（p）来调用子类，（<strong>因为把子类的对象赋给了它</strong>）<br><strong>如果基类的函数中没有virtual的话，就算是把子类的对象赋值给了父类指针，由于静态联编，指针p永远都只调用父类的方法（下行转换，和java的向上造型类似）<br>但是，若父类的某个方法用virtual修饰了，变成了虚函数，那么，这时virtual就起作用了，这个p 将会调用Child类的function2，而不是父类的function2~~</strong><br>若Parent类还有一个子类，叫Child2<br>当执行<br>Parent *p;<br>p=new Child2();<br>时，就能体现出virtual的功劳了，动态联编会选择执行Child2这个类的function2函数，而不是基类的function2函数</p>
<p>下面是我做的和java的对比：<br>1.c++的虚函数和java中普通方法的重写类似。（当方法被重写时，调用哪个方法看<strong>对象</strong>，与引用无关），注：重载时看类型；向上造型时看类型。</p>
<p>2.补充：区别c++和java<br>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">C++           Java</div><div class="line">　　虚函数 ---------普通函数</div><div class="line">　　纯虚函数 ------ 抽象方法</div><div class="line">　　抽象类 -------- 抽象类</div><div class="line">　　虚基类 -------- 接口</div></pre></td></tr></table></figure></p>
<p>c++定义一个函数为虚函数，不代表函数为不被实现的函数。<br>      定义他为虚函数是为了允许用基类的指针来调用子类的这个函数。<br>      定义一个函数为纯虚函数，才代表函数没有被实现。<br>抽象类只能作为基类来使用，其纯虚函数的实现由派生类给出。如果派生类中没有重新定义纯虚函数，而只是继承基类的纯虚函数，则这个派生类仍然还是一个抽象类。如果派生类中给出了基类纯虚函数的实现，则该派生类就不再是抽象类了，它是一个可以建立对象的具体的类。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/20/printf-易忽视的大问题/" itemprop="url">
                  printf 易忽视的大问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-09-20T21:37:01+08:00" content="2017-09-20">
              2017-09-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/09/20/printf-易忽视的大问题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/20/printf-易忽视的大问题/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>  今天看到了  printf 的一些知识  感觉挺好  下面 我就来吐槽一下 ： 《该博文以下内容的 测试平台及环境 win  64bit  VS2012》<br> <a href="http://www.cnblogs.com/hnrainll/archive/2011/08/05/2128496.html" target="_blank" rel="external">http://www.cnblogs.com/hnrainll/archive/2011/08/05/2128496.html</a>      //从printf谈可变参数函数的实现</p>
<p>首先，使用 uint32_t  别忘了加头文件 <code>#include &lt;stdint.h&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">int64_t a = 1;</div><div class="line">    printf(&quot;%d\n&quot;, a);         </div><div class="line">    //输出结果 ： 1  果然是1！但是你会不会以为是 a 首先被自动转化成了 int 类型，然后输入为 1的呢？</div><div class="line">    //如果真这么简单，本文到此也该结束了。我们换一个写法：  </div><div class="line"></div><div class="line">    int64_t b = 1;</div><div class="line">    int c = 2;</div><div class="line">    printf(&quot;%d, %d\n&quot;, b, c);   </div><div class="line">    //这次的结果是多少呢？1 和 2？真的吗？我们来看一下结果：</div><div class="line">    //输出结果： 1, 0 </div><div class="line">    //好吧，你可能该惊讶了。然而这个结果的确是对的。</div><div class="line">    //如果你还是觉得不可相信，我们再来看一个代码：</div><div class="line">    /*</div><div class="line">    这就涉及到 printf 的设计了，printf的第一个参数永远是字符串，他会解析每一个类似 %d 的结构，然后对指针做对应长度的偏移，如%d是4，%lld就是8。（为什么要偏移，请参看这里 从printf谈可变参数函数的实现）</div><div class="line">    实际上两个%d分别取得是 a 的低4字节和高4字节，从而分别是1和0（这里还涉及到大小端的问题，本机是小端存储）。</div><div class="line">    */</div><div class="line"></div><div class="line">    uint32_t uin0 = 1;</div><div class="line">    printf(&quot;uin0 = %llu\n&quot;, uin0);</div><div class="line">    //原文输出一个很大的随机数  我现在的平台与环境是正常输出 1</div><div class="line"></div><div class="line">    uint32_t uin = 1;</div><div class="line">    uint32_t uin2 = 2;</div><div class="line">    printf(&quot;%llu\n&quot;, uin, uin2);</div><div class="line"></div><div class="line">    uint64_t uin3 = uin2;</div><div class="line">    uin3 = uin3 &lt;&lt; 32;</div><div class="line">    uin3 += uin;</div><div class="line">    printf(&quot;%llu\n&quot;,uin3);</div><div class="line">    //uin2比uin先入栈，所以uin2会在高位，uin会在低位。</div><div class="line">    //如果按照我们所解释的，那两个结果应该完全一致，对不对？我们来看一下输出： </div><div class="line">    // 8589934593</div><div class="line">    // 8589934593</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div></pre></td><td class="code"><pre><div class="line">llu 64位无符号</div><div class="line">d，lx，ld，，lu，这几个都是输出32位的</div><div class="line">hd，hx，hu，这几个都是输出16位数据的，</div><div class="line">hhd，hhx，hhu，这几个都是输出8位的，</div><div class="line">lld，ll，llu，llx，这几个都是输出64位的，</div><div class="line"></div><div class="line">printf（ &quot;%llu &quot;,.....）</div><div class="line">%llu   是64位无符号</div><div class="line">%llx才是64位16进制数</div><div class="line"> </div><div class="line"></div><div class="line">Dev-C++下基本数据类型学习小结</div><div class="line"></div><div class="line">环境: Dev-C++ 4.9.6.0 (gcc/mingw32), 使用-Wall编译选项</div><div class="line"></div><div class="line">基本类型包括字节型（char）、整型（int）和浮点型（float/double）。</div><div class="line"></div><div class="line">定义基本类型变量时，可以使用符号属性signed、unsigned（对于char、int），和长度属性short、long（对</div><div class="line"></div><div class="line">于int、double）对变量的取值区间和精度进行说明。</div><div class="line"></div><div class="line">下面列举了Dev-C++下基本类型所占位数和取值范围：</div><div class="line"></div><div class="line">符号属性     长度属性     基本型     　　所占位数     取值范围       　　　　输入符举例      输出符举例</div><div class="line"></div><div class="line">--            --          char         8         -2^7 ~ 2^7-1        %c          %c、%d、%u</div><div class="line"></div><div class="line">signed        --          char         8         -2^7 ~ 2^7-1        %c          %c、%d、%u</div><div class="line"></div><div class="line">unsigned      --          char         8         0 ~ 2^8-1           %c          %c、%d、%u</div><div class="line"></div><div class="line">[signed]      short       [int]        16        -2^15 ~ 2^15-1              %hd</div><div class="line"></div><div class="line">unsigned      short       [int]        16        0 ~ 2^16-1             %hu、%ho、%hx</div><div class="line"></div><div class="line">[signed]      --           int         32        -2^31 ~ 2^31-1              %d</div><div class="line"></div><div class="line">unsigned      --          [int]        32        0 ~ 2^32-1              %u、%o、%x</div><div class="line"></div><div class="line">[signed]      long        [int]        32        -2^31 ~ 2^31-1              %ld</div><div class="line"></div><div class="line">unsigned      long        [int]        32        0 ~ 2^32-1             %lu、%lo、%lx</div><div class="line"></div><div class="line">[signed]      long long   [int]        64        -2^63 ~ 2^63-1             %I64d</div><div class="line"></div><div class="line">unsigned      long long   [int]        64        0 ~ 2^64-1          %I64u、%I64o、%I64x</div><div class="line"></div><div class="line">--            --          float        32       +/- 3.40282e+038         %f、%e、%g</div><div class="line"></div><div class="line">--            --          double       64       +/- 1.79769e+308  %lf、%le、%lg   %f、%e、%g</div><div class="line"></div><div class="line">--            long        double       96       +/- 1.79769e+308        %Lf、%Le、%Lg</div><div class="line"></div><div class="line">几点说明：</div><div class="line"></div><div class="line">1. 注意! 表中的每一行，代表一种基本类型。“[]”代表可省略。</div><div class="line"></div><div class="line">例如：char、signed char、unsigned char是三种互不相同的类型；</div><div class="line"></div><div class="line">int、short、long也是三种互不相同的类型。</div><div class="line"></div><div class="line">可以使用C++的函数重载特性进行验证，如:</div><div class="line"></div><div class="line">void Func(char ch) &#123;&#125;</div><div class="line"></div><div class="line">void Func(signed char ch) &#123;&#125;</div><div class="line"></div><div class="line">void Func(unsigned char ch) &#123;&#125;</div><div class="line"></div><div class="line">是三个不同的函数。</div><div class="line"></div><div class="line">2. char/signed char/unsigned char型数据长度为1字节；</div><div class="line"></div><div class="line">char为有符号型，但与signed char是不同的类型。</div><div class="line"></div><div class="line">注意! 并不是所有编译器都这样处理，char型数据长度不一定为1字节，char也不一定为有符号型。</div><div class="line"></div><div class="line">3. 将char/signed char转换为int时，会对最高符号位1进行扩展，从而造成运算问题。</div><div class="line"></div><div class="line">所以,如果要处理的数据中存在字节值大于127的情况，使用unsigned char较为妥当。</div><div class="line"></div><div class="line">程序中若涉及位运算，也应该使用unsigned型变量。</div><div class="line"></div><div class="line">4. char/signed char/unsigned char输出时，使用格式符%c（按字符方式）；</div><div class="line"></div><div class="line">或使用%d、%u、%x/%X、%o，按整数方式输出；</div><div class="line"></div><div class="line">输入时，应使用%c，若使用整数方式，Dev-C++会给出警告，不建议这样使用。</div><div class="line"></div><div class="line">5. int的长度，是16位还是32位，与编译器字长有关。</div><div class="line"></div><div class="line">16位编译器（如TC使用的编译器）下，int为16位；32位编译器（如VC使用的编译器cl.exe）下，int为32</div><div class="line"></div><div class="line">位。</div><div class="line"></div><div class="line">6. 整型数据可以使用%d（有符号10进制）、%o（无符号8进制）或%x/%X（无符号16进制）方式输入输出。</div><div class="line"></div><div class="line">而格式符%u，表示unsigned，即无符号10进制方式。</div><div class="line"></div><div class="line">7. 整型前缀h表示short，l表示long。</div><div class="line"></div><div class="line">输入输出short/unsigned short时，不建议直接使用int的格式符%d/%u等，要加前缀h。</div><div class="line"></div><div class="line">这个习惯性错误，来源于TC。TC下，int的长度和默认符号属性，都与short一致，</div><div class="line"></div><div class="line">于是就把这两种类型当成是相同的，都用int方式进行输入输出。</div><div class="line"></div><div class="line">8. 关于long long类型的输入输出：</div><div class="line"></div><div class="line">&quot;%lld&quot;和&quot;%llu&quot;是linux下gcc/g++用于long long int类型(64 bits)输入输出的格式符。</div><div class="line"></div><div class="line">而&quot;%I64d&quot;和&quot;%I64u&quot;则是Microsoft VC++库里用于输入输出__int64类型的格式说明。</div><div class="line"></div><div class="line">Dev-C++使用的编译器是Mingw32，Mingw32是x86-win32 gcc子项目之一，编译器核心还是linux下的gcc。</div><div class="line"></div><div class="line">进行函数参数类型检查的是在编译阶段，gcc编译器对格式字符串进行检查，显然它不认得&quot;%I64d&quot;，</div><div class="line"></div><div class="line">所以将给出警告“unknown conversion type character `I&apos; in format”。对于&quot;%lld&quot;和&quot;%llu&quot;，gcc理</div><div class="line"></div><div class="line">所当然地接受了。</div><div class="line"></div><div class="line">Mingw32在编译期间使用gcc的规则检查语法，在连接和运行时使用的却是Microsoft库。</div><div class="line"></div><div class="line">这个库里的printf和scanf函数当然不认识linux gcc下&quot;%lld&quot;和&quot;%llu&quot;，但对&quot;%I64d&quot;和&quot;%I64u&quot;，它则是</div><div class="line"></div><div class="line">乐意接受，并能正常工作的。</div><div class="line"></div><div class="line">9. 浮点型数据输入时可使用%f、%e/%E或%g/%G，scanf会根据输入数据形式，自动处理。</div><div class="line"></div><div class="line">输出时可使用%f（普通方式）、%e/%E（指数方式）或%g/%G（自动选择）。</div><div class="line"></div><div class="line">10. 浮点参数压栈的规则：float(4 字节)类型扩展成double(8 字节)入栈。</div><div class="line"></div><div class="line">所以在输入时，需要区分float(%f)与double(%lf)，而在输出时，用%f即可。</div><div class="line"></div><div class="line">printf函数将按照double型的规则对压入堆栈的float(已扩展成double)和double型数据进行输出。</div><div class="line"></div><div class="line">如果在输出时指定%lf格式符，gcc/mingw32编译器将给出一个警告。</div><div class="line"></div><div class="line">11. Dev-C++(gcc/mingw32)可以选择float的长度，是否与double一致。</div><div class="line"></div><div class="line">12. 前缀L表示long（double）。</div><div class="line"></div><div class="line">虽然long double比double长4个字节，但是表示的数值范围却是一样的。</div><div class="line"></div><div class="line">long double类型的长度、精度及表示范围与所使用的编译器、操作系统等有关。</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/20/海康威视2018秋招-嵌入式软件开发9.20/" itemprop="url">
                  海康威视2018秋招-嵌入式软件开发9.20
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-09-20T16:33:57+08:00" content="2017-09-20">
              2017-09-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/笔试面试/" itemprop="url" rel="index">
                    <span itemprop="name">笔试面试</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/09/20/海康威视2018秋招-嵌入式软件开发9.20/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/20/海康威视2018秋招-嵌入式软件开发9.20/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>1.静态变量通常存储在进程哪个区？</strong><br>  答：静态变量和全局变量都存在全局区（静态区）。     new和malloc申请的在堆区。  函数局部变量和函数的参数在栈区。</p>
<p>2.在软件生命周期中，能准确地确认软件系统必须做什么和必须具备哪些功能地阶段是：<strong>需求分析</strong>。</p>
<p><strong>3.请用只包含一个表达式的宏定义，判断一个数是否是2的n次幂的数？</strong><br>  答：<strong> #define  S（n）（（n&amp;(n-1)）==0 ）</strong></p>
<p><strong>4.在file.c文件中有如下函数</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include&lt;stdio.h&gt;</div><div class="line">uint64_t get_square(uint64_t a)</div><div class="line">&#123;</div><div class="line"> return a*a;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在file.c文件中有如下代码，<br>注：file.c中没有包含get_square函数的声明；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">void main()</div><div class="line">&#123;</div><div class="line"> uint64_t ret = 0;</div><div class="line"> ret = get_square(1&lt;&lt;20);</div><div class="line"> printf(&quot;ret = %#llx\n&quot;,ret);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果输出多少？<br>%llx表示64位16进制数；左移20位的平方就是左移40位，4位二进制是一个16进制。就是16进制左移10位。即0x00000000001—–<strong>0x10000000000</strong>(答案)</p>
<p><strong>5.请写出int变量v关于s(数值&gt;=1且为2的n次方)向上对齐的宏定义</strong><br> （如7关于4向上对齐为8，16关于8向上对齐后为16）<br> 答案： <code>#define ROUND_UP(v,s) ( ((v)+sizeof(s)-1)&amp;~(sizeof(s)-1) )</code><br>  具体解析参考 <a href="http://blog.csdn.net/duanlove/article/details/9948947" target="_blank" rel="external">http://blog.csdn.net/duanlove/article/details/9948947</a> //Linux socket.h 中 CMSG_ALIGN 宏定义的作用（字节对齐）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/18/Linux系统32位与64位数据类型长度比较/" itemprop="url">
                  Linux系统32位与64位数据类型长度比较
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-09-18T11:44:52+08:00" content="2017-09-18">
              2017-09-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/09/18/Linux系统32位与64位数据类型长度比较/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/18/Linux系统32位与64位数据类型长度比较/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Linux系统32位与64位GCC编译器基本数据类型长度对照表</strong><br><strong>GCC 32位</strong><br>sizeof(char)=1<br>sizeof(double)=8<br>sizeof(float)=4<br>sizeof(int)=4<br><strong>sizeof(short)=2</strong><br><strong>sizeof(long)=4</strong><br><strong>sizeof(long long)=8</strong><br><strong>sizeof(long double)=12</strong><br><strong>sizeof(complex long double)=24</strong></p>
<p><strong>GCC 64位</strong><br>sizeof(char)=1<br>sizeof(double)=8<br>sizeof(float)=4<br>sizeof(int)=4<br>sizeof(short)=2<br><strong>sizeof(long)=8</strong><br><strong>sizeof(long long)=8</strong><br><strong>sizeof(long double)=16<br>sizeof(complex long double)=32</strong></p>
<p>32位，指针占用4个字节；<br>64位，指针占用8个字节。<br>以下是实测结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;limits.h&gt;</div><div class="line">int main(void)</div><div class="line">&#123;</div><div class="line">printf(&quot;size of char %d\n&quot;,sizeof(char));</div><div class="line">printf(&quot;size of char max %d\n&quot;,CHAR_MAX);</div><div class="line">printf(&quot;size of char min %d\n&quot;,CHAR_MIN);</div><div class="line">printf(&quot;size of int %d\n&quot;,sizeof(int));</div><div class="line">printf(&quot;size of int min %d\n&quot;,INT_MIN);</div><div class="line">printf(&quot;size of int max %d\n&quot;,INT_MAX);</div><div class="line">printf(&quot;size of long %d\n&quot;,sizeof(long));</div><div class="line">printf(&quot;size of long min %ld\n&quot;,LONG_MIN);</div><div class="line">printf(&quot;size of long max %ld\n&quot;,LONG_MAX);</div><div class="line">printf(&quot;size of short %d\n&quot;,sizeof(short));</div><div class="line">printf(&quot;size of short min %d\n&quot;,SHRT_MIN);</div><div class="line">printf(&quot;size of short max %d\n&quot;,SHRT_MAX);</div><div class="line">printf(&quot;size of unsigned char %d\n&quot;,sizeof(unsigned char));</div><div class="line">printf(&quot;size of unsigned char max %d\n&quot;,UCHAR_MAX);</div><div class="line">printf(&quot;size of unsigned long %d\n&quot;,sizeof(unsigned long));</div><div class="line">printf(&quot;size of unsigned long max %lu\n&quot;,ULONG_MAX);</div><div class="line">printf(&quot;size of unsigned short %d\n&quot;,sizeof(unsigned short));</div><div class="line">printf(&quot;size of unsigned short max %u\n&quot;,USHRT_MAX);</div><div class="line">printf(&quot;size of double %d\n&quot;,sizeof(double));</div><div class="line">printf(&quot;size of long long %d\n&quot;,sizeof(long long));</div><div class="line">printf(&quot;size of long double %d\n&quot;,sizeof(long double));</div><div class="line">printf(&quot;size of float %d\n&quot;,sizeof(float));</div><div class="line">int *p;</div><div class="line">printf(&quot;size of pointer  %d\n&quot;,sizeof(p));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>64 |32位上运行结果：<br>size of char 1<br>size of char max 127<br>size of char min -128<br>size of int 4<br>size of int min -2147483648<br>size of int max 2147483647<br>size of long 8  |32位是4<br>size of long min -9223372036854775808<br>size of long max 9223372036854775807<br>size of short 2<br>size of short min -32768<br>size of short max 32767<br>size of unsigned char 1<br>size of unsigned char max 255<br>size of unsigned long 8 |32位是4<br>size of unsigned long max 18446744073709551615<br>size of unsigned short 2<br>size of unsigned short max 65535<br>size of double 8<br>size of long long 8<br>size of long double 16     ///////32位是12<br>size of float 4<br>size of pointer  8  /////////32位是4 </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/17/海康威视2018秋招-嵌入式软件9.14/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-09-17T19:00:59+08:00" content="2017-09-17">
              2017-09-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/09/17/海康威视2018秋招-嵌入式软件9.14/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/17/海康威视2018秋招-嵌入式软件9.14/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>title: 海康威视2018秋招-嵌入式软件9.14<br>date: 2017-09-17 19:00:59<br>tags: [嵌入式,笔试]<br>categories: 笔试面试</p>
<hr>
<p><strong>1.同步通信和异步通信的区别：</strong><br>同步是指：发送方发出数据后，等接收方发回响应以后才发下一个数据包的通讯方式。<br>异步是指：发送方发出数据后，不等接收方发回响应，接着发送下个数据包的通讯方式。<br>同步是阻塞模式，异步是非阻塞模式。<br>其中SPI 、IIC为同步通信  UART为异步通信。（SPI和UART是全双工，IIC是半双工，全双工指能同时接收和发送）<br>同步通信与异步通信区别：<br>   1.同步通信要求接收端时钟频率和发送端时钟频率一致，发送端发送连续的比特流；异步通信时不要求接收端时钟和发送端时钟同步，发送端发送完一个字节后，可经过任意长的时间间隔再发送下一个字节。<br>    2.同步通信效率高；异步通信效率较低。<br>    3.同步通信较复杂，双方时钟的允许误差较小；异步通信简单，双方时钟可允许一定误差。<br>    4.同步通信可用于点对多点；异步通信只适用于点对点。</p>
<p><strong>2.嵌入式ARM架构的嵌入式处理器的特点：</strong><br>  寻址方式简单，采用固定长度的指令格式<br>  具有大量的寄存器，指令执行速度快<br>  绝大多数操作都在寄存器中执行，通过LOAD/STORE的体系结构在内存和寄存器之间传递数据<br>  <strong>不同时支</strong>持大端小端数据格式。（采用大小模式对数据进行存放的主要区别在于在存放的字节顺序，大端方式将高位存放低地址，小端方式将高位存放高地址）<br>  补充：编写一段程序判断系统中的CPU 是大端 还是小端 模式？<br>  解答：</p>
<pre><code>程序1：
int checkEnd()
{
int i=0x12345678;
char *c=(char *)&amp;i; 
return(*c==0x12)
}
返回值：大端返回1，小段返回0
程序2：
int checkEnd()
{
union
{
long a;
char b
}u; 
u.a = 1;
if (u.b == 1) return 0;
else return 1;
}
返回值：大端返回1，小段返回0
</code></pre><p>补：intel芯片是小端(修改分区表时要注意)，单片机一般为大端</p>
<p><strong>3.多播</strong><br>多播是一点对多点的通信。<br>如今网络的通信方式主要有以下几种：<br>单播(unicast：point to point)，点到点的通信方式；<br>多播(multicast：point tO multipoint)，点到多点的通信方式；<br>汇播(concast：multipoint to point)，多点到一点的通信方式；<br>群播(multipoint tO multipoint)，多点到多点的通信方式，多播的一种推广；<br>广播(broadcast：point to all point)，点到所有节点的通信方式。<br><strong>IP多播（也称多址广播或组播）技术</strong>，是一种允许一台或多台主机（多播源）发送单一数据包到多台主机（一次的，同时的）的TCP/IP网络技术。多播作为一点对多点的通信，是节省网络带宽的有效方法之一。<br><strong>广播和多播仅应用于UDP</strong>，它们对需将报文同时传往多个接收者的应用来说十分重要。TCP是一个面向连接的协议，它意味着分别运行于两主机（由IP地址确定）内的两进程（由端口号确定）间存在一条连接。<br><strong>第一组八位数的头四位用1110表示</strong>， 这代表该地址是一个多播地址， 其余28位比特标识具体的多播 地 址 。 因 此 ， 多 播 地 址 的 范 围<strong> 从 224.0.0.0到239.255.255.255</strong>。 其中， 后28比特的地址字段中不再有结构层次， 也不标出组的来源， 不会象 A、B、C类地址那样包含一个网络地址。多播地址的使用分配现在由互联 网 地 址 指 派 机 构 （IANA） 控 制[1]  。<br>补充：ip地址总共分为5类，A、B、C、D、E<br>A：<strong>0-127</strong>，其中0代表任何地址，127为回环测试地址，因此，A类ip地址的实际范围是1-126.<br>默认子网掩码为255.0.0.0，<strong>实际范围是1.0.0.0–126.0.0.0</strong></p>
<p>B：<strong>128-191</strong>，其中128.0.0.0和191.255.0.0为保留ip<br>实际范围是<strong>128.1.0.0–191.254.0.0</strong></p>
<p>C类ip地址<br>C：<strong>192-223</strong>，其中192.0.0.0和223.255.255.0为保留ip<br>实际范围是<strong>192.1.0.0–223.255.254.0</strong></p>
<p>D类ip地址<br><strong>224.0.0.0到239.255.255.255</strong>用于多点广播 </p>
<p>E类ip地址<br><strong>240.0.0.0到255.255.255.254</strong><br>255.255.255.255用于广播地址</p>
<p><strong>4.如何对某一位置0或者置1？</strong></p>
<p>写成宏，方便移植</p>
<pre><code>#define setbit(x,y) x|=(1&lt;&lt;y) //将X的第Y位置1
#define clrbit(x,y) x&amp;=~(1&lt;&lt;y) //将X的第Y位清0置位操作
</code></pre><p><strong>5.linux系统下，.a是静态链接库文件；.so是动态链接库文件；.ko 是内核模块文件，是内核加载的某个模块，一般是驱动程序。</strong></p>
<p><strong>6</strong>.请写出int变量x中<strong>第p比特位到第n比特位取反</strong>，其他比特不变的宏定义（0&lt;=p&lt;=n&lt;=31）。</p>
<pre><code>#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
//第p比特位到第n比特位取反
void intvert(int x, int p, int n)
{
    int bin_c[32], tmp_c[32];
    for (int i = 0; i &lt; 32; i++)//将十进制转换成二进制
    {
        bin_c[i] = x % 2;
        x = x / 2;
    }
    printf(&quot;取反前二进制：\n&quot;);
    for (int i = 31; i &gt;= 0; i--)
    {
        printf(&quot;%d&quot;, bin_c[i]);
    }
    //p = 32 - p;//初始为逆向存储，所以定位到首元素开始计算位置
 /******************************************/   
    p = p - 1;//从左往右依次从高位到低位
    while (n-p){
        //对从p开始的二进制取反
        bin_c[p] ^= 1;
        p++;
    }
 /******************************************/   
    printf(&quot;\n取反后二进制：\n&quot;);
    for (int i = 31; i &gt;= 0; i--)
    {
        printf(&quot;%d&quot;, bin_c[i]);
    }

    printf(&quot;\n取反后十进制：\n&quot;);
    long int sum=0;
    for (int i = 31; i &gt;= 0; i--)
    {
        if (bin_c [i]== 1){
            sum += pow(2.0, i);//2的i次方
        }
    }
    printf(&quot;%ld \n&quot;, sum);
}
int main()
{
    intvert(6535, 2, 5);
    return 0;
}
</code></pre><p>效果如图：<br><img src="http://ols4zt49w.bkt.clouddn.com/1505701077%281%29.png" alt="从第2位到第5位取反"></p>
<p>写一函数，<strong>将整型X的第p位开始的n个位</strong>（二进制位）取反</p>
<pre><code>/******************************************/将上面的星号部分改成如下
    p = p - 1;//从左往右依次从高位到低位
    while (n){
        //对从p开始的二进制取反
        bin_c[p] ^= 1;
        --n;
        p++;
    }
/******************************************/
</code></pre><p>效果如图：<br><img src="http://ols4zt49w.bkt.clouddn.com/1505702154%281%29.png" alt="从第2位开始的5位取反"><br><strong>按位异或 “^”</strong><br>按位异或运算通常用来将某变量中的某些位取反，且保留其他位不变（如果a、b两个值不相同，则异或结果为1。如果a、b两个值相同，异或结果为0。）</p>
<p><strong>7.预处理</strong><br>预处理有三种：<strong>宏定义</strong>、<strong>条件编译</strong>和<strong>头文件</strong><br><strong>#ifndef..#define…#endif的作用</strong><br><strong>#ifndef</strong><br>它是if not define 的简写，是宏定义的一种，实际上确切的说，这应该是预处理功能三种（宏定义、文件包含、条件编译）中的一种—-条件编译。<br>　　在c语言中，对同一个变量或者函数进行多次声明是不会报错的。所以如果h文件里只是进行了声明工作，即使不使用# ifndef宏定义，多个c文件包含同一个h文件也不会报错。<br>　　但是在c++语言中，#ifdef的作用域只是在单个文件中。所以如果h文件里定义了全局变量，即使采用#ifdef宏定义，多个c文件包含同一个h文件还是会出现全局变量重定义的错误。<br><strong>使用#ifndef可以避免下面这种错误：如果在h文件中定义了全局变量，一个c文件包含同一个h文件多次，如果不加#ifndef宏定义，会出现变量重复定义的错误；如果加了#ifndef，则不会出现这种错误。</strong></p>
<p><strong>8.左移&lt;&lt;，右移&gt;&gt;，按位与&amp;，按位或|</strong></p>
<pre><code>a &lt;&lt; b
的值是：将a各二进位全部左移b位后得到的值。左移时，高位丢弃，低位补0。a 的值不因运算而改变。
实际上，左移1位，就等于是乘以2，左移n位，就等于是乘以2的n次方。而左移操作比乘法操作快得多。
</code></pre><pre><code>a &gt;&gt; b
的值是：将a各二进位全部右移b位后得到的值。右移时，移出最右边的位就被丢弃。 a 的值不因运算而改变。
对于有符号数，如long,int,short,char类型变量，在右移时，符号位（即最高位）将一起移动，并且大多数C/C++编译器规定，如果原符号位为1，则右移时高位就补充1，原符号位为0，则右移时高位就补充0。
实际上，右移n位，就相当于左操作数除以2的n次方，并且将结果往小里取整。
-25 &gt;&gt; 4 = -2
-2 &gt;&gt; 4 = -1
18 &gt;&gt; 4 = 1
</code></pre><pre><code>按位与 “&amp;”
按位与运算通常用来将某变量中的某些位清0且同时保留其他位不变。
也可以用来获取某变量中的某一位。
例如，如果需要将int型变量n的低8位全置成0，而其余位不变，则可以执行：
n = n &amp; 0xffffff00;
也可以写成：
n &amp;= 0xffffff00;
如果n是short类型的，则只需执行：
n &amp;= 0xff00;
如何判断一个int型变量n的第7位（从右往左，从0开始数）是否是1 ?
只需看表达式 “n &amp; 0x80”的值是否等于0x80即可。
0x80: 1000 0000
</code></pre><pre><code>按位或 “|”
按位或运算通常用来将某变量中的某些位置1且保留其他位不变。
例如，如果需要将int型变量n的低8位全置成1，而其余位不变，则可以执行：
n |= 0xff;
0xff: 1111 1111
</code></pre><p><strong>题目：在linux 32位系统下，请问调用test_cac(1,15)的结果是？<br>void test_cac(int high, int low)<br>{<br>    int val = high &lt;&lt; 16 + low &gt;&gt; 16;<br>    printf(“0x%x\n”, val);<br>}</strong><br>分析：<strong>在linux 32位系统下，int型也是占4个字节</strong>，而<strong>且’+‘的优先级比 ’&lt;&lt;‘ 和 ’&gt;&gt;‘ 的优先级高</strong>，同时优先级相同的&lt;&lt;和&gt;&gt;根据相关性按照<strong>从左往右算</strong>。<br>即1&lt;<16+15>&gt;15<br>  1&lt;<31>&gt;15<br> 先算左移1&lt;&lt;31:<br> 0000 0000 0000 0000 0000 0000 0000 0001<br> 1000 0000 0000 0000 0000 0000 0000 0000</31></16+15></p>
<p> 再算右移 &gt;&gt;15，在右移时，符号位（即最高位）将一起移动，如果原符号位为1，则右移时高位就补充1，原符号位为0，则右移时高位就补充0。<br> 1111 1111 1111 1111 1000 0000 0000 0000————-即0xffff8000</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/23/QT数据库操作2/" itemprop="url">
                  QT数据库操作2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-08-23T18:58:55+08:00" content="2017-08-23">
              2017-08-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/08/23/QT数据库操作2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/08/23/QT数据库操作2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在前面我写了<a href="http://shalian.site/2017/07/30/Qt%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" target="_blank" rel="external">Qt数据库操作</a>，在那实现了从服务器端获取数据并存储，在这我讲解一种从文件中上传数据的方法，具体参考我之前的文章<a href="http://shalian.site/2017/08/04/http%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%A1%A5%E5%85%85/" target="_blank" rel="external">http协议的补充</a>。<br>注意：文件中存储的数据是json形式，读取数据是json形式的字符串，以字符串形式上传。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/23/QT移植到am437x开发板/" itemprop="url">
                  QT移植到am437x开发板
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-08-23T18:42:00+08:00" content="2017-08-23">
              2017-08-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/08/23/QT移植到am437x开发板/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/08/23/QT移植到am437x开发板/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在把之前开发好的应用程序移植到板子上，由于公司用的是TI的am437x系列，网上的资料也比较少，所以前前后后摸索了一个多星期，中间遇到了一些问题，通过自己的摸索还算是最终移植成功了。下面就此做一个简单的小结：<br>首先贴出我参考的以些资料：<br><a href="http://bbs.elecfans.com/forum.php?mod=viewthread&amp;tid=905966&amp;extra=&amp;ordertype=2" target="_blank" rel="external">【创龙AM4379 Cortex-A9试用体验】之移植QT5.4.1与tslib1.4到TL-4379开发板</a><br><a href="http://blog.csdn.net/hechao3225/article/details/52981148" target="_blank" rel="external">Qt for ARM_Linux环境搭建-Qt5.7+iTop4412嵌入式平台移植 </a><br><a href="http://www.cnblogs.com/topeet/p/5711957.html" target="_blank" rel="external">【转帖】嵌入式4412开发板QT5.7编译安装到arm </a><br><a href="http://www.cnblogs.com/t1029901995/p/6046600.html" target="_blank" rel="external">Qt5.7.0移植到4412 </a><br><a href="http://blog.csdn.net/hechao3225/article/details/52981148" target="_blank" rel="external">Qt for ARM_Linux环境搭建-Qt5.7+iTop4412嵌入式平台移植 </a></p>
<p>在移植的过程中遇到的问题：<br>1.linux下qt不能编译？<br>  解决：（1）权限的问题：工程代码需要权限；qtcreator也需要权 （2）linux下目录是‘/’（没有双杠，且左低右高）<br>2.移植的注意点：<br>  （1）如果是原生的ubuntu（刚装好的），移植前需要先安装x11的库，见下图：</p>
<p>  <img src="http://ols4zt49w.bkt.clouddn.com/%E5%AE%89%E8%A3%85x11,%E5%8F%AF%E8%83%BD%E5%AE%89%E8%A3%85%E6%BA%90%E9%9C%80%E8%A6%81%E6%94%B9.png" alt=""><br>  （2）安装跟板子配套的交叉编译工具链，注意：三星的4412是arm-none-linux-gnueabi-gcc，ti用的是arm-linux-gnueabihf，由于板子出厂固件中运行的是基于Qt5.7,因此我下载的也是跟5.7配套的交叉编译工具链<code>gcc-linaro-6.2.1-2016.11-x86_64_arm-linux-gnueabihf.tar</code><br>  （3）修改交叉编译架构用到的信息：<br>   <img src="http://ols4zt49w.bkt.clouddn.com/1503489195%281%29.png" alt=""></p>
<p>  （3）创建脚本文件用于生成Makefile文件时，要有<code>-no-iconv  \</code>, 否则字库会出问题。<br>   <img src="http://ols4zt49w.bkt.clouddn.com/1503489408%281%29.png" alt=""></p>
<p>  （4）在开发板上运行校正程序时出现No raw modules loaded<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">解决方法是把  tslib/etc目录下的ts.conf 的 &quot;#module_raw input&quot;的注释符号“＃”去掉。但记住不要在前面留有 空格 ，否则会出现错误Segmentation fault</div></pre></td></tr></table></figure></p>
<p>  （5）程序运行起来，仍报错：<br>QIconvCodec::convertFromUnicode: using Latin-1 for conversion, iconv_open failed<br>QIconvCodec::convertToUnicode: using Latin-1 for conversion, iconv_open failed​<br>解决 ：下载 <a href="http://ftp.gnu.org/gnu/libiconv/libiconv-1.14.tar.gz" target="_blank" rel="external">http://ftp.gnu.org/gnu/libiconv/libiconv-1.14.tar.gz</a><br>                ./configure -prefix=$PWD/_install -host=arm-linux-gnueabihf<br>                make<br>                make install<br>                把_install/lib 下的preloadable_libiconv.so 拷到系统的/system/lib 下,<br>                export LD_PRELOAD=/system/lib/preloadable_libiconv.so</p>
<p>   （6）在环境变量配置时，如果不想把板子自带的DT Demo覆盖掉，可以不配置QT_ROOT<br>   配置如下：<br>   <img src="http://ols4zt49w.bkt.clouddn.com/1503489027%281%29.png" alt=""></p>
<p>   （7）要使板子支持中文，可以下载中文字库，放在ARM板的fonts目录下，这里我放在<code>/usr/share/fonts/ttf</code>下。此处我提供下载连接。<br>   <a href="http://ols4zt49w.bkt.clouddn.com/DroidSansFallback.ttf" target="_blank" rel="external">QT中文字库，直接放在ARM板的fonts目录下</a></p>
<p>   （8）移植sqlite到arm板上，参考：<a href="http://www.cnblogs.com/lidabo/p/5851752.html" target="_blank" rel="external">http://www.cnblogs.com/lidabo/p/5851752.html</a></p>
<p>最后，附上一张移植后的图片：<br><img src="http://ols4zt49w.bkt.clouddn.com/881346359011543039.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/04/http协议的补充/" itemprop="url">
                  http协议的补充
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-08-04T14:51:16+08:00" content="2017-08-04">
              2017-08-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/网络编程/" itemprop="url" rel="index">
                    <span itemprop="name">网络编程</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/08/04/http协议的补充/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/08/04/http协议的补充/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.cnblogs.com/ranyonsue/p/5984001.html" target="_blank" rel="external">http://www.cnblogs.com/ranyonsue/p/5984001.html</a><br>在最近的项目中需要将本地文本中的json数据发送到服务器，在这里我采取了http的post方式，它的<strong>请求头部</strong>和<strong>请求数据</strong>是分开的。<strong>思路</strong>：我先将文档的数据读取出来，转化成字符串，然后拼接到http包的body中，最后提交数据请求。</p>
<p>一、首先我们了解一下我采取如此方案的原因：</p>
<p><strong>POST提交</strong>：把提交的数据放置在是HTTP包的包体中。<br><strong>GET提交</strong>，请求的数据会附在URL之后（就是把数据放置在HTTP协议头中），以?分割URL和传输数据，多个参数用&amp;连接；例 如：login.action?name=hyddd&amp;password=idontknow&amp;verify=%E4%BD%A0 %E5%A5%BD。如果数据是英文字母/数字，原样发送，如果是空格，转换为+，如果是中文/其他字符，则直接把字符串用BASE64加密，得出如： %E4%BD%A0%E5%A5%BD，其中％XX中的XX为该符号以16进制表示的ASCII。<br><strong>因此，GET提交的数据会在地址栏中显示出来，而POST提交，地址栏不会改变。</strong></p>
<p><strong>我们看看GET和POST的区别</strong><br>1.GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&amp;相连，如EditPosts.aspx?name=test1&amp;id=123456. POST方法是把提交的数据放在HTTP包的Body中.<br><strong>2.GET提交的数据大小有限制（因为浏览器对URL的长度有限制），而POST方法提交的数据没有限制</strong>.<br>3.GET方式需要使用Request.QueryString来取得变量的值，而POST方式通过Request.Form来获取变量的值。<br>4.GET方式提交数据，会带来安全问题，比如一个登录页面，通过GET方式提交数据时，用户名和密码将出现在URL上，如果页面可以被缓存或者其他人可以访问这台机器，就可以从历史记录获得该用户的账号和密码。</p>
<p>二、下面是部分代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">void Widget::on_pushButton_3_clicked()</div><div class="line">&#123;</div><div class="line"></div><div class="line">    QFile file(&quot;C:/Users/hasee/Desktop/shujv-ceshi/build-untitled-Desktop_QT_5_3-Debug/test.txt&quot;);</div><div class="line">    file.open(QIODevice::ReadWrite);</div><div class="line">    //int file_len =file.size();</div><div class="line">    //QByteArray fdata=file.readAll();</div><div class="line">    QString data =file.readAll();</div><div class="line">    qDebug()&lt;&lt;data;</div><div class="line">    QNetworkRequest request;</div><div class="line"></div><div class="line">    request.setUrl(QUrl(&quot;http://172.16.10.24:8081/shsh/nfc/nfc-thickness!uploadThicknessRecordString.action&quot;));</div><div class="line">   // request.setUrl(QUrl(&quot;http://172.16.10.24:8081/shsh/nfc/nfc-thickness!checkUser.action&quot;));</div><div class="line">    request.setHeader(QNetworkRequest::ContentTypeHeader,&quot;application/x-www-form-urlencoded&quot;);</div><div class="line">    request.setRawHeader(&quot;Accept&quot;,&quot;text/html, application/xhtml+xml, */*&quot;);</div><div class="line">   // request.setRawHeader(&quot;Referer&quot;,&quot;http://localhost:8888/login&quot;);</div><div class="line">    request.setRawHeader(&quot;Accept-Language&quot;,&quot;zh-CN&quot;);</div><div class="line">    request.setRawHeader(&quot;X-Requested-With&quot;,&quot;XMLHttpRequest&quot;);</div><div class="line">    request.setRawHeader(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)&quot;);</div><div class="line">    request.setRawHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);//窗体数据被编码为名称/值对。这是标准的编码格式</div><div class="line">    //request.setRawHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);//如果是json格式访问则加,但是这里我以字符串来发送，将文本里的内容读取发送</div><div class="line">    request.setRawHeader(&quot;Accept-Encoding&quot;,&quot;gzip,deflate&quot;);</div><div class="line">    request.setRawHeader(&quot;Connection&quot;,&quot;Keep-Alive&quot;);</div><div class="line">    request.setRawHeader(&quot;Cache-Control&quot;,&quot;no-cache&quot;);</div><div class="line"></div><div class="line">    QString postData;</div><div class="line">   // postData.append(&quot;pid=1332&amp;username=superuser&amp;password=admin&quot;);</div><div class="line">   // postData.append(&quot;token=7eb935fb518e4234b83d3cae22d3873d&amp;recordFileString=&#123;thicknessrecord:&apos;sha&apos;,a:12.21&#125;&quot;);</div><div class="line">    postData.append(&quot;token=7eb935fb518e4234b83d3cae22d3873d&amp;recordFileString=&quot;);</div><div class="line">    postData+=data;//将文件中的字符串拼接上</div><div class="line">    QByteArray postData1=postData.toLatin1();//很重要，要将请求数据编码,toUtf8()也行</div><div class="line">    request.setRawHeader(&quot;Content-Length&quot;,QString::number(postData1.length()).toLatin1());//在请求头部设置请求数据的长度</div><div class="line">    _uploadManager-&gt;post(request,postData1);//postData1是请求数据</div><div class="line">          qDebug()&lt;&lt;postData1;</div><div class="line">    connect( _uploadManager,SIGNAL(finished(QNetworkReply*)),SLOT(replyFinished(QNetworkReply*)));</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/30/Qt数据库操作/" itemprop="url">
                  Qt数据库操作
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-30T17:17:33+08:00" content="2017-07-30">
              2017-07-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/QT/" itemprop="url" rel="index">
                    <span itemprop="name">QT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/07/30/Qt数据库操作/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/07/30/Qt数据库操作/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在公司的项目涉及到用QT来操作数据库，在qt里自带了一个小型本地型的数据库sqlite，一般在移动设备或嵌入式设备中经常使用，但是公司服务器端用的是<strong>oracle数据库</strong>，这就需要实现两种数据库的交互。在此我采用的方案是，服务器端提供相关<strong>接口</strong>，然后在软件中通过<strong>http</strong>协议<strong>获取一些json数据</strong>，通过<strong>解析</strong>再将它们<strong>写入</strong>软件自带的<strong>sqlite数据库</strong>。</p>
<h5 id="数据库的建立"><a href="#数据库的建立" class="headerlink" title="数据库的建立"></a>数据库的建立</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">#ifndef COLLECTION_H</div><div class="line">#define COLLECTION_H</div><div class="line">#include &lt;QMessageBox&gt;</div><div class="line">#include &lt;QSqlDatabase&gt;</div><div class="line">#include &lt;QSqlQuery&gt;</div><div class="line"></div><div class="line">static bool createConnection()</div><div class="line">&#123;</div><div class="line">    // 创建一个数据库连接，使用“connection1”为连接名</div><div class="line">    QSqlDatabase db1 = QSqlDatabase::addDatabase(&quot;QSQLITE&quot;, &quot;connection1&quot;);//可以省略第二个参数即连接名，创建默认连接</div><div class="line">    db1.setDatabaseName(&quot;my1.db&quot;);//数据库名</div><div class="line">    if (!db1.open()) &#123;</div><div class="line">        QMessageBox::critical(0, &quot;Cannot open database1&quot;,</div><div class="line">                              &quot;Unable to establish a database connection.&quot;, QMessageBox::Cancel);</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // 这里要指定连接</div><div class="line">    QSqlQuery query1(db1);</div><div class="line">    //query1.exec(&quot;SET NAMES &apos;Latin1&apos;&quot;);//使数据库支持中文</div><div class="line">    query1.exec(&quot;create table Measuring_point (id int primary key, &quot;</div><div class="line">                &quot;pointpart varchar(100),&quot;</div><div class="line">                &quot;pressure number(10,3),&quot;</div><div class="line">                &quot;tempeture number(10,3),&quot;</div><div class="line">                &quot;medium varchar(100),&quot;</div><div class="line">                &quot;material varchar(100),&quot;</div><div class="line">                &quot;originthickness number(10),&quot;</div><div class="line">                &quot;outerdiameter number(10),&quot;</div><div class="line">                &quot;deviceid number(19),&quot;</div><div class="line">                &quot;devicename varchar(100),&quot;</div><div class="line">                &quot;orgseq varchar(30),&quot;</div><div class="line">                &quot;equipid number(19),&quot;</div><div class="line">                &quot;equipcode varchar(100),&quot;</div><div class="line">                &quot;equipname varchar(100),&quot;</div><div class="line">                &quot;partual varchar(200))&quot;);</div><div class="line"></div><div class="line">   // query1.exec(&quot;insert into Measuring_point values(0,&apos;sha&apos;,&apos;lian&apos;,&apos;150MPa&apos;,&apos;20&apos;,&apos;无&apos;,&apos;无&apos;,&apos;12mm&apos;,&apos;14mm&apos;,&apos;C:/Users/hasee/Desktop/nfc-04/nfc/pics/changshi.png&apos;)&quot;);</div><div class="line"></div><div class="line"></div><div class="line">    QSqlQuery query2(db1);</div><div class="line">    //query1.exec(&quot;SET NAMES &apos;Latin1&apos;&quot;);//使数据库支持中文</div><div class="line">    query2.exec(&quot;create table ThicknessRecord (pointid int primary key, &quot;</div><div class="line">                &quot;checkdate date(100),&quot;</div><div class="line">                &quot;value number(10,2))&quot;);</div><div class="line"></div><div class="line"></div><div class="line">    return true;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#endif // COLLECTION_H</div></pre></td></tr></table></figure>
<h5 id="http访问"><a href="#http访问" class="headerlink" title="http访问"></a>http访问</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">//发送请求</div><div class="line">void Widget::on_pushButton_clicked()</div><div class="line">&#123;</div><div class="line">    manage = new QNetworkAccessManager(this);</div><div class="line">    manage1= new QNetworkAccessManager(this);</div><div class="line">    QNetworkRequest network_request;</div><div class="line">    QNetworkRequest network_request1;</div><div class="line"></div><div class="line">    /*设置发送数据*/</div><div class="line"></div><div class="line">   //QString cityName = &quot;杭州&quot;;</div><div class="line"></div><div class="line">  // network_request.setUrl(QUrl(&quot;http://apis.haoservice.com/weather?cityname=%E6%9D%AD%E5%B7%9E&amp;key=4c08a10447eb435e98080000c50f3f77&amp;paybyvas=false&quot;));</div><div class="line"></div><div class="line">   /* 注意：当url里有中文或空格之类的，需要用一些在线转码工具进行url编码，这里纠结了很久*/</div><div class="line"></div><div class="line">  //验证用户</div><div class="line"> // network_request.setUrl(QUrl(&quot;http://172.16.10.24:8081/dreamfoil/nfc/nfc-thickness!checkUser.action?pid=1349&amp;username=superuser&amp;password=admin&quot;));</div><div class="line"></div><div class="line"> //下载测点信息</div><div class="line">    network_request.setUrl(QUrl(&quot;http://172.16.10.24:8081/dreamfoil/nfc/nfc-thickness!downloadMeasurePoint.action?token=306d848a21164e23a4ce33a051b6dde7&amp;pnum=6&quot;));</div><div class="line"></div><div class="line">    //下载测厚记录</div><div class="line">  //  network_request1.setUrl(QUrl(&quot;http://172.16.10.24:8081/dreamfoil/nfc/nfc-thickness!downloadThicknessRecord.action?token=306d848a21164e23a4ce33a051b6dde7&quot;));</div><div class="line">    /*发送get网络请求*/</div><div class="line">    manage-&gt;get(network_request);</div><div class="line">   // manage1-&gt;get(network_request1);</div><div class="line">    /*建立connect，replyFinished为自定义槽函数，获取api发回来的天气信息（Jason）格式*/</div><div class="line">    connect(manage,SIGNAL(finished(QNetworkReply *)),this,SLOT( getReplyFinished(QNetworkReply *)) );</div><div class="line">  //  connect(manage1,SIGNAL(finished(QNetworkReply *)),this,SLOT( getReplyFinished(QNetworkReply *)) );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="json解析及插入数据库"><a href="#json解析及插入数据库" class="headerlink" title="json解析及插入数据库"></a>json解析及插入数据库</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">//获取传回的数据</div><div class="line">void Widget::getReplyFinished(QNetworkReply *reply)</div><div class="line">&#123;</div><div class="line">    if(reply-&gt;error()!= QNetworkReply::NoError)</div><div class="line">       qDebug() &lt;&lt; QStringLiteral(&quot;响应失败&quot;);</div><div class="line"></div><div class="line">    QByteArray bytes = reply-&gt;readAll();</div><div class="line">    QJsonParseError jsonError;</div><div class="line">    QJsonDocument document = QJsonDocument::fromJson(bytes,&amp;jsonError);//转化为json文档</div><div class="line">    if (jsonError.error != QJsonParseError::NoError) &#123;</div><div class="line">            qDebug() &lt;&lt; QStringLiteral(&quot;解析Json失败&quot;);//此处可以验证是否获取到天气信息（json格式）</div><div class="line">            //qDebug() &lt;&lt; bytes;//如果API响应的不是json格式的数据，则不用解析，直接输出</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">    QJsonObject data = document.object();//转化为对象，传回的整体是一个对象</div><div class="line">    //QJsonArray data = document.array();  // 转化为数组</div><div class="line">    qDebug() &lt;&lt; &quot;测点信息：&quot; &lt;&lt; data;</div><div class="line">    qDebug()&lt;&lt;&quot;result:&quot;;</div><div class="line">    getMeasurePointInfo(data);//获取测点信息</div><div class="line">   // getMeasureRecordInfo(data);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//获取测点result信息，进一步解析json</div><div class="line">void Widget::getMeasurePointInfo(QJsonObject data)</div><div class="line">&#123;</div><div class="line">    if (data.contains(&quot;result&quot;))</div><div class="line">    &#123;</div><div class="line">     QJsonValue value = data.value(&quot;result&quot;);</div><div class="line">     if(value.isArray())&#123;    //result是数组</div><div class="line">        QJsonArray array = value.toArray();</div><div class="line">        int nSize = array.size();  // 获取数组大小</div><div class="line">        MeasurePointInfo pointInfo;</div><div class="line">        //QStringList todayInfoList;//在文本框里显示</div><div class="line">        QSqlDatabase db1 = QSqlDatabase::database(&quot;connection1&quot;);//database（）静态函数，通过指定链接名来获取相应的数据库连接</div><div class="line">        QSqlQuery query1(db1);</div><div class="line">        for (int i = 0; i &lt; nSize; ++i) &#123;  // 遍历数组</div><div class="line">               if(array.at(i).isObject())&#123;  //数组里面又是对象</div><div class="line">                   QJsonObject object =array.at(i).toObject();</div><div class="line">                   pointInfo.orgseq = object.value(&quot;orgseq&quot;).toString();//装置序列</div><div class="line">                   pointInfo.pointpart = object.value(&quot;pointpart&quot;).toString();//测点部位</div><div class="line">                   pointInfo.equipname = object.value(&quot;equipname&quot;).toString();//设备名称</div><div class="line">                   pointInfo.deviceid = object.value(&quot;deviceid&quot;).toString();//装置id</div><div class="line">                   pointInfo.originthickness = object.value(&quot;originthickness&quot;).toDouble();//公称壁厚</div><div class="line">                   pointInfo.equipcode = object.value(&quot;equipcode&quot;).toString();//设备编号</div><div class="line">                   pointInfo.equipid = object.value(&quot;equipid&quot;).toInt();       //设备id</div><div class="line">                   pointInfo.parturl = object.value(&quot;parturl&quot;).toString();  //部位图</div><div class="line">                   pointInfo.id = object.value(&quot;id&quot;).toInt();                 //测点id</div><div class="line">                   qDebug() &lt;&lt; &quot;getMeasurePointInfo:\n&quot; &lt;&lt;pointInfo.orgseq&lt;&lt; pointInfo.pointpart &lt;&lt; pointInfo.equipname &lt;&lt; pointInfo.deviceid &lt;&lt; pointInfo.originthickness</div><div class="line">                           &lt;&lt;pointInfo.equipcode&lt;&lt;pointInfo.equipid&lt;&lt;pointInfo.parturl&lt;&lt;pointInfo.id;</div><div class="line">                 &#125;</div><div class="line">               //插入数据</div><div class="line">               query1.prepare(&quot;insert into Measuring_point values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;);//位置绑定</div><div class="line">               query1.bindValue(0,pointInfo.id);</div><div class="line">               query1.bindValue(1,pointInfo.pointpart);</div><div class="line">               query1.bindValue(10,pointInfo.orgseq);</div><div class="line">               query1.bindValue(13,pointInfo.equipname);</div><div class="line">               query1.bindValue(8,pointInfo.deviceid);</div><div class="line">               query1.bindValue(6,pointInfo.originthickness);</div><div class="line">               query1.bindValue(12,pointInfo.equipcode);</div><div class="line">               query1.bindValue(11,pointInfo.equipid);</div><div class="line">               query1.bindValue(14,pointInfo.parturl);</div><div class="line">               query1.exec();</div><div class="line"></div><div class="line">               //更新数据</div><div class="line"></div><div class="line">               /*query1.clear();</div><div class="line">               query1.prepare(QString(&quot;update pointpart=?,orgseq=?,&quot;</div><div class="line">                                      &quot;equipname=?,deviceid=?,&quot;</div><div class="line">                                      &quot;originthickness=?,equipcode=?,&quot;</div><div class="line">                                      &quot;equipid=?,partural=? where id=%1&quot;).arg(pointInfo.id));</div><div class="line">               query1.bindValue(1,pointInfo.pointpart);</div><div class="line">               query1.bindValue(10,pointInfo.orgseq);</div><div class="line">               query1.bindValue(13,pointInfo.equipname);</div><div class="line">               query1.bindValue(8,pointInfo.deviceid);</div><div class="line">               query1.bindValue(6,pointInfo.originthickness);</div><div class="line">               query1.bindValue(12,pointInfo.equipcode);</div><div class="line">               query1.bindValue(11,pointInfo.equipid);</div><div class="line">               query1.bindValue(14,pointInfo.partural);</div><div class="line">               query1.exec();</div><div class="line">              */</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line"> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="将数据库的数据在tablewidget显示"><a href="#将数据库的数据在tablewidget显示" class="headerlink" title="将数据库的数据在tablewidget显示"></a>将数据库的数据在tablewidget显示</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">if (createConnection()) //连接成功</div><div class="line">&#123;</div><div class="line">   // 使用QSqlQuery查询连接1的整张表，先要使用连接名获取该连接</div><div class="line">   QSqlDatabase db1 = QSqlDatabase::database(&quot;connection1&quot;);//database（）静态函数，通过指定链接名来获取相应的数据库连接</div><div class="line">   QSqlQuery query1(db1);</div><div class="line">   qDebug() &lt;&lt; &quot;connection1:&quot;;</div><div class="line">   //query1.exec(&quot;select * from Measuring_point&quot;);</div><div class="line">   query1.exec(&quot;select id,pointpart,originthickness from Measuring_point&quot;);</div><div class="line">   query1.last();</div><div class="line">   int nRow=query1.at()+1;</div><div class="line">   query1.first();</div><div class="line">   //tableWidget-&gt;setColumnCount(nRow);</div><div class="line">   //while(query1.next())//这边不能再有了，因为会影响到for循环的query1.next()</div><div class="line">   //&#123;</div><div class="line">       //qDebug() &lt;&lt; &quot;ok&quot;;</div><div class="line">      // qDebug() &lt;&lt; query1.value(0).toInt() &lt;&lt; query1.value(1).toString();</div><div class="line">   //&#125;</div><div class="line"></div><div class="line">   tableWidget = new QTableWidget(this);</div><div class="line">   QStringList header;</div><div class="line">   header&lt;&lt;&quot;设备管理&quot;&lt;&lt;&quot;测点部位&quot; &lt;&lt;&quot;公称壁厚(mm)&quot; &lt;&lt;&quot;测量壁厚(mm)&quot;</div><div class="line">        &lt;&lt;&quot;测量时间&quot;&lt;&lt;&quot;测量提示&quot;&lt;&lt;&quot;关联状态&quot;&lt;&lt;&quot;更多&quot;;</div><div class="line">   tableWidget-&gt;setRowCount(nRow);//一定要有行和列</div><div class="line">   tableWidget-&gt;setColumnCount(8);</div><div class="line">   tableWidget-&gt;setHorizontalHeaderLabels(header);</div><div class="line">   /*QPalette pll = tableWidget-&gt;palette();</div><div class="line">   pll.setBrush(QPalette::Base,QBrush(QColor(255,255,255,0)));</div><div class="line">   tableWidget-&gt;setPalette(pll);  //和QTextEdit一样，都可以使用样式表QPalette来修改它的背景颜色和背景图片，这里我们把刷子设置为全透明的，就可以是透明的</div><div class="line">  */</div><div class="line">   ui-&gt;manageLayout-&gt;addWidget(tableWidget);</div><div class="line">  // tableWidget-&gt;show();</div><div class="line"></div><div class="line">             /************第一行的数据******************/</div><div class="line">   tableWidget-&gt;setItem(0,0,new QTableWidgetItem(query1.value(0).toString()));</div><div class="line">   tableWidget-&gt;setItem(0,1,new QTableWidgetItem(query1.value(1).toString()));</div><div class="line">   tableWidget-&gt;setItem(0,2,new QTableWidgetItem(query1.value(2).toString()));</div><div class="line"></div><div class="line">   /********************将数据在table widget显示************************/</div><div class="line">   for(int i=1;query1.next();i++)&#123;</div><div class="line"></div><div class="line">       tableWidget-&gt;setItem(i,0,new QTableWidgetItem(query1.value(0).toString()));</div><div class="line">       tableWidget-&gt;setItem(i,1,new QTableWidgetItem(query1.value(1).toString()));</div><div class="line">       tableWidget-&gt;setItem(i,2,new QTableWidgetItem(query1.value(2).toString()));</div><div class="line"></div><div class="line">       QCheckBox* checkBoxSeclect = new QCheckBox();</div><div class="line">       QCheckBox* checkBoxInsert = new QCheckBox();</div><div class="line">       QCheckBox* checkBoxUpdate = new QCheckBox();</div><div class="line">       QCheckBox* checkBoxDelect = new QCheckBox();</div><div class="line">       tableWidget-&gt;setCellWidget(i,3,checkBoxSeclect);</div><div class="line">       tableWidget-&gt;setCellWidget(i,4,checkBoxInsert);</div><div class="line">       tableWidget-&gt;setCellWidget(i,5,checkBoxUpdate);</div><div class="line">       tableWidget-&gt;setCellWidget(i,6,checkBoxDelect);</div><div class="line">       qDebug() &lt;&lt; &quot;ok&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   tableWidget-&gt;show();</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/23/短路非短路与/" itemprop="url">
                  短路非短路与
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-23T16:26:29+08:00" content="2017-07-23">
              2017-07-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java学习/" itemprop="url" rel="index">
                    <span itemprop="name">java学习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/07/23/短路非短路与/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/07/23/短路非短路与/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="短路非短路与"><a href="#短路非短路与" class="headerlink" title="短路非短路与"></a>短路非短路与</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">1.运算符</div><div class="line">    算术：+，-，*，/，%，++，--</div><div class="line">    关系：&gt;,&lt;,&lt;=，&gt;=,==,!=</div><div class="line">    逻辑 : &amp;&amp; , ||, !</div><div class="line">注意：</div><div class="line">    &amp;&amp;和||又称为短路与和短路非 （写 &amp; 和 | 的时候不短路，逻辑一样）</div><div class="line">          例子：</div><div class="line">                   int  a=5,b=10,c=5;</div><div class="line">                   boolean b3 = a&lt;b &amp;&amp; a++&gt;2;</div><div class="line">                   System.out.println(b3);           //true</div><div class="line">                   System.out.println(a);            //6</div><div class="line"></div><div class="line">                    </div><div class="line">                   int  a=5,b=10,c=5;</div><div class="line">                   boolean b3 = a&gt;b &amp;&amp; a++&gt;2;</div><div class="line">                   System.out.println(b3);           //false</div><div class="line">                   System.out.println(a);            //5,</div><div class="line">对于&amp;&amp;，当第一个操作数为false时，将不会再判断第二个数的操作，结果都为false</div><div class="line">对于||，    当第一个操作数为true时，将不会再判断第二个数的操作， 结果都为true</div></pre></td></tr></table></figure>
<p>应用比较<br>短路&amp;&amp; 是很有用的。例如，下面的程序语句说明了短路逻辑运算符的优点，用它来防止被0除的错误：<br>if (denom != 0 &amp;&amp; num / denom &gt; 10)<br>既然用了短路与(&amp;&amp;) 运算符，就不会有当denom为0时产生的意外运行时错误。如果该行代码使用标准与 运算符（&amp;），它将对两个运算数都求值，当出现被0除的情况时，就会产生运行时错误。</p>
<h4 id="基本类型转换"><a href="#基本类型转换" class="headerlink" title="基本类型转换"></a>基本类型转换</h4><p>基本类型间的转换：<br>   类型从小到大依次为：(与字节无关)<br>    byte,   short/char,  int,   long,  float , double,<br> 1）两种方式：<br> <strong>   1.1自动类型转换：从小类型到大类型<br>    1.2强制类型转换：从大类型到小类型</strong></p>
<p> 2）两点规则：<br><strong>    2.1整数直接量可以直接赋值给byte，short，char,但不能超范围<br>    2.2byte,short,char型变量参与运算时，先一律转为int再运算</strong><br>byte b1=5;//可以，因为是直接量<br>byte b2=6;//可以<br>byte b3=b1+b2;//不可以，必须得强转 byte b3=（byte）(b1+b2);   b1+b2后已经是int型</p>
<h4 id="建议使用扩展赋值"><a href="#建议使用扩展赋值" class="headerlink" title="建议使用扩展赋值"></a>建议使用扩展赋值</h4><p>赋值:建议使用扩展赋值<br>         a+=5; 相当于a=a+5<br>例子：  short s1 =5;<br>            s1=s1+10;//编译错误，要强转<br>            s1+=10;   //正确，<strong>扩展赋值运算自动强转</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/3812b31bb051f8196c5029e9d8b44aed2e73e718.jpg"
               alt="shalian" />
          <p class="site-author-name" itemprop="name">shalian</p>
          <p class="site-description motion-element" itemprop="description">记录生活点滴</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">45</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">54</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shalian123" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/3329000660/home?wvr=5" target="_blank" title="新浪微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  新浪微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-pinterest"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.baidu.com/" title="百度" target="_blank">百度</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://harmansecurity.cn/" title="harman" target="_blank">harman</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.codecooler.tech/" title="DoRin" target="_blank">DoRin</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shalian</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"shalian"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
