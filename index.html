<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Wind" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="记录生活点滴">
<meta property="og:type" content="website">
<meta property="og:title" content="Wind">
<meta property="og:url" content="http://shalian123.github.io/index.html">
<meta property="og:site_name" content="Wind">
<meta property="og:description" content="记录生活点滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wind">
<meta name="twitter:description" content="记录生活点滴">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Wind </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Wind</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">细节在于观察，成功在于积累。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2019/06/07/Linux多线程/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2019-06-07T21:57:29+08:00" content="2019-06-07">
              2019-06-07
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2019/06/07/Linux多线程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2019/06/07/Linux多线程/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>title: Linux多线程<br>date: 2019-05-25 22:45:01<br>tags: [c]<br>categories: 多线程</p>
<h1 id="进程与线程"><a href="#进程与线程" class="headerlink" title="进程与线程"></a>进程与线程</h1><p>　　进程的定义：进程是为了描述程序在并发执行时对系统资源的共享，所需的一个描述程序执行时动态特征的概念。进程是具有独立功能的程序关于某个数据集合上的一次运行活动，是系统进行资源分配、调度和保护的独立单位。<br>　　线程的定义：线程也成为轻量级进程，是进程中的一个运行实体，作为CPU的调度单位。一个进程由多个线程组成，线程与同属一个进程的其他的线程共享进程所拥有的全部资源。<br>      <strong>同一进程内的所有线程</strong>除了==共享全局变量==外还共享：</p>
<ul>
<li>进程指令；</li>
<li><strong>mm</strong>；</li>
<li>代码段（代码和常量）；</li>
<li><strong>数据段（全局变量和静态变量）</strong></li>
<li>扩展段（<strong>堆存储</strong>）</li>
<li>打开的文件（即描述符）；</li>
<li>信号处理函数和信号处置；</li>
<li>当前工作目录；</li>
<li>用户ID和组ID。<br>   <strong>每个线程拥有各自的：</strong></li>
<li>线程ID；</li>
<li>寄存器集合，包括程序计数器和栈指针；</li>
<li><strong>栈</strong>（用于存放局部变量和返回地址）；</li>
<li>errno；</li>
<li>信号掩码；</li>
<li>优先级。<pre><code>结构上的不同可以让我们更加了解进程和线程的相异之处：
（1）==进程是资源分配的基本单位==；线程与资源分配无关，它属于某一个进程，并与进程内的其他线程共享进程的资源。
（2）当进程发生调度时，不同的进程拥有不同的虚拟地址空间，而同一进程内的不同线程共享同一地址空间。
（3）线程只由先关堆栈（系统栈或用户栈）寄存器和线程控制块组成。寄存器用来存储线程内的局部变量，但不能存储其他线程的相关变量。
（4）进程切换时涉及有关资源指针的保存和地址空间的变化；线程切换时，由于处于同一进程内，所以不涉及资源信息的保存和地址空间的变化，从而减少了操作系统的时间开销
</code></pre></li>
</ul>
<h1 id="进程fork和vfork"><a href="#进程fork和vfork" class="headerlink" title="进程fork和vfork"></a>进程fork和vfork</h1><p>fork（），子进程会拷贝父进程资源，但是==不共享，彼此隔离==。这里可以引申一下<strong><a href="https://www.cnblogs.com/biyeymyhjob/archive/2012/07/20/2601655.html" target="_blank" rel="external">写时拷贝技术</a></strong>。</p>
<p> <img src="https://img-blog.csdnimg.cn/2019052516060756.png#pic_center" alt="fock()"><br> vfock()，子进程会拷贝父进程资源，但是==内存不会拷贝==，与父进程共享一个内存（物理地址）。<br> <img src="https://img-blog.csdnimg.cn/20190525161505299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc2MzI1OQ==,size_16,color_FFFFFF,t_70#pic_center" alt="vfork()"></p>
<h1 id="pthread-join和pthread-death"><a href="#pthread-join和pthread-death" class="headerlink" title="pthread_join和pthread_death"></a>pthread_join和pthread_death</h1><h2 id="一：关于join"><a href="#一：关于join" class="headerlink" title="一：关于join"></a>一：关于join</h2><p>　join<br>　　join是<strong>三种同步线程的方式之一</strong>。另外两种分别是互斥锁（mutex）和条件变量（condition variable）。<br>调用pthread_join()将阻塞自己，一直到要等待加入的线程运行结束， 或者调用了pthread_exit，或者被取消。<br>　　可以用pthread_join()获取线程的返回值。<br>　　一个线程对应一个pthread_join()调用，对同一个线程进行多次pthread_join()调用是逻辑错误。<br>join or detach<br>　　线程分两种：一种可以join，另一种不可以。该属性在创建线程的时候指定。<br>joinable线程可在创建后，<strong>用pthread_detach()显式地分离</strong>。但分离后不可以再合并。该操作不可逆。<br>为了确保移植性，在创建线程时，最好显式指定其join或detach属性。似乎不是所有POSIX实现都是用joinable作默认。 </p>
<h2 id="二：-pthread-detach"><a href="#二：-pthread-detach" class="headerlink" title="二： pthread_detach"></a>二： pthread_detach</h2><p>　　创建一个线程默认的状态是joinable, 如果一个线程结束运行但没有被join,则它的状态类似于进程中的Zombie Process,即还有一部分资源没有被回收（退出状态码），所以创建线程者应该调用pthread_join来等待线程运行结束，并可得到线程的退出代码，回收其资源（类似于wait,waitpid) 。但是调用pthread_join(pthread_id)后，如果该线程没有运行结束，调用者会被阻塞，在有些情况下我们并不希望如此，比如在Web服务器中当主线程为每个新来的链接创建一个子线程进行处理的时候，主线程并不希望因为调用pthread_join而阻塞（因为还要继续处理之后到来的链接），<br>　　这时可以<strong>在子线程中加入代码 pthread_detach(pthread_self()) ，或者父线程调用<br>　　pthread_detach(thread_id)（非阻塞，可立即返回） ，这将该子线程的状态设置为detached,则该线程运行结束后会自动释放所有资源。</strong> </p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>如果进程中的某个线程执行了pthread_detach(th)，则th线程将处于DETACHED状态，这使得th线程在结束运行时自行释放所占用的 内存资源，同时也无法由pthread_join()同步，pthread_detach()执行之后，对th请求pthread_join()将返回错误 。</li>
<li>一个可join的线程所占用的内存仅当有线程对其执行了pthread_join()后才会释放，因此为了避免内存泄漏，所有线程的终止，要么已设为DETACHED，要么就需要使用pthread_join()来回收 。</li>
<li>用pthread_exit只会使主线程自身退出，产生的子线程继续执行；用return则所有线程退出。<br>　　<br>　　在进程主函数（main()）中调用pthread_exit()，只会使主函数所在的线程（可以说是进程的主线程）退出；而如果是return，编译器将使其调用进程退出的代码（如_exit()），从而导致进程及其所有线程结束运行。 </li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/20/printf缓冲区问题/" itemprop="url">
                  printf缓冲区问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-08-20T22:45:01+08:00" content="2018-08-20">
              2018-08-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2018/08/20/printf缓冲区问题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/08/20/printf缓冲区问题/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://ols4zt49w.bkt.clouddn.com/FZDKDS%25E~QUS_8WZ$AQ%600WF.png" alt=""><br><strong>关于printf的缓冲问题：</strong><br>在printf的实现中，在调用write之前先写入IO缓冲区，这是一个用户空间的缓冲。系统调用是软中断，频繁调用，需要频繁陷入内核态，这样的效率不是很高，而printf实际是向用户空间的IO缓冲写，在满足条件的情况下才会调用write系统调用，减少IO次数，提高效率。<br>printf在glibc中默认为行缓冲，遇到以下几种情况会<strong>刷新缓冲区</strong>，输出内容：<br>（1）缓冲区填满；<br>（2）写入的字符中有换行符\n或回车符\r；<br>（3）调用fflush手动刷新缓冲区；<br>（4）调用scanf要从输入缓冲区中读取数据时，也会将输出缓冲区内的数据刷新。<br>可使用setbuf(stdout,NULL)<strong>关闭行缓冲</strong>，或者setbuf(stdout,uBuff)设置新的缓冲区，uBuff为自己指定的缓冲区。也可以使用setvbuf(stdout,NULL,_IOFBF,0);来改变标准输出为全缓冲。全缓冲与行缓冲的区别在于遇到换行符不刷新缓冲区。<br><strong>注意：</strong><br>main函数的return有刷新缓冲区，但是其他函数的return并不能刷新！！！ printf在VC++中默认关闭缓冲区，输出时会及时的输到屏幕。如果显示开启缓冲区，只能设置全缓冲。因为微软闭源，所以无法研究printf函数的实现源码。<br>linux下printf默认是存在缓冲区的。<br>Linux和Windows下的缓冲区管理可见：<a href="https://blog.csdn.net/k346k346/article/details/63259524" target="_blank" rel="external">标题C的全缓冲、行缓冲和无缓冲</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/07/14/性能优化/" itemprop="url">
                  性能优化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-07-14T14:00:38+08:00" content="2018-07-14">
              2018-07-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/嵌入式/" itemprop="url" rel="index">
                    <span itemprop="name">嵌入式</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2018/07/14/性能优化/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/07/14/性能优化/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近实习需要优化嵌入式Linux系统的性能。主要问题是平台软件刚启动就会占用较大的内存和CPU，后期平台负载工作时可能会出现卡顿等现象，因此需要优化内存和CPU的占用量。</p>
<hr>
<p>系统性能优化（主要内存和CPU）通常包括两个阶段：性能剖析和代码优化。<br>①性能剖析主要是寻找出性能瓶颈，找出引发性能问题的原因和热点代码。<br>②代码优化的目标是针对具体性能问题而优化代码或编译选项，从而改善系统性能。</p>
<h4 id="性能剖析"><a href="#性能剖析" class="headerlink" title="性能剖析"></a>性能剖析</h4><p>通过top 命令我们可以发现hicore进程所占资源最多,同时通过<code>cat /proc/&lt;pid&gt;/status</code>或者<code>ll /proc/&lt;pid&gt;/task/wc -l</code>等命令，可知hicore进程下具有63个线程，即支持多线程编程。为了进一步定位出性能问题所在，需要查看hicore进程下各线程所占资源和具体函数的资源消耗情况。</p>
<hr>
<p>通常，查看某进程下各线程所占资源，可以通过<code>top -H -P &lt;pid&gt;</code>命令实现，但是在嵌入式linux开发中，很多时候，搭建好的系统都是被剪裁过的，有很多时候我们需要的功能可能是不完整或是没有的。想要在剪裁过的系统开发板使用剪裁掉的命令我需要重新用busybox交叉编译top命令，然后将生成的可执行文件拷贝到系统路劲下，但是注意：<br>1、在<a href="https://blog.csdn.net/gangyanliang/article/details/8226637" target="_blank" rel="external">busybox命令大全</a>中，top并没有提到 - H 参数。<br>2、交叉编译工具链：<code>/opt/hisi-linux/x86-arm/arm-hisiv500-linux/target/bin/arm-hisiv500-linux-</code>  不需要带上gcc。<br>3、编译好后可执行文件在_install/bin/文件目录下。（如果配置里没改）</p>
<p>在我移植结束后，并不能支持<code>top -H -p &lt;pid&gt;</code>,还是只能top,然后H切换获取系统各线程的情况，不能针对某一个进程下的各线程。（具体效果图由于保密协议就不放了）</p>
<p>在尝试重新编译top命令无效后，通过研究，我发现系统性能级性能分析工具perf也可以实现我想要的效果。</p>
<h4 id="perf安装"><a href="#perf安装" class="headerlink" title="perf安装"></a>perf安装</h4><p>在2.6.31及后续版本的linux内核里，内核原生支持性能的采样和分析工具perf。如果是发行版的内核，比如Ubuntu，直接使用<code>apt-get install linux-common-tools</code>就可以了。而在嵌入式linux系统上，不像发行版可以install。通过研究，发现两种方法：<br>①<a href="https://blog.csdn.net/dean_gdp/article/details/69873923" target="_blank" rel="external">perf交叉编译移植</a>；<br>②如果是自己编译的内核，在内核源码的tools/perf下面，进行configure,make,make install即可。<br><strong>注意：编译使用的编译器和编译内核要是同一个。</strong>（具体移植方法自行百度，不再叙述了）</p>
<p>####<a href="https://blog.csdn.net/kebu12345678/article/details/75036083" target="_blank" rel="external"> perf的使用</a><br>具体命令及操作见上面链接。<br><code>perf top -p &lt;pid&gt;</code> 仅分析目标进程及创建的线程</p>
<p>最后附上移植过程中容易出现的问题<a href="https://blog.csdn.net/chenyong05314/article/details/7061375" target="_blank" rel="external">https://blog.csdn.net/chenyong05314/article/details/7061375</a><br>本文主要讲解我自己在性能优化研究过程中性能剖析部分。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/29/2018华为软件精英挑战赛总结/" itemprop="url">
                  2018华为软件精英挑战赛总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-04-29T15:13:40+08:00" content="2018-04-29">
              2018-04-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2018/04/29/2018华为软件精英挑战赛总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/29/2018华为软件精英挑战赛总结/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>距离上一篇博文发布已经快过去半年了，在这半年里虽然我没有实时更新博文，但笔记其实还在记录。由于偶然间发现印象笔记这个神器，因此这半年的笔记我基本上都在我的印象笔记里，等以后有时间我再更新到博客上。</p>
<p><strong>队名：胜利属于兄弟会<br>ShaLian<br>2018/4/28</strong></p>
<p>做了将近一个半月的华为软件精英挑战赛最终落下了帷幕，在整个比赛中我们收获了很多，有算法软件知识，也有团队交流合作能力。最终取得<strong>杭厦赛区13名</strong>的成绩，对没能取得前4还是有点遗憾的，但是因为结束了一个多月的紧张备战还是感到轻松了很多。</p>
<h4 id="比赛结果"><a href="#比赛结果" class="headerlink" title="比赛结果"></a><strong>比赛结果</strong></h4><p>初赛<br><img src="http://ols4zt49w.bkt.clouddn.com/1524987094%281%29.png" alt=""><br>复赛<br><img src="http://ols4zt49w.bkt.clouddn.com/1524987119%281%29.png" alt=""></p>
<h4 id="比赛赛题"><a href="#比赛赛题" class="headerlink" title="比赛赛题"></a><strong>比赛赛题</strong></h4><p><strong>题目背景</strong><br>云平台为了满足不同租户的需求，提供了一种可随时自助获取、可弹性伸缩的云服务器，即弹性云服务器（Elastic Cloud Server，ECS）。为容纳更多的租户请求、并尽可能提高资源利用率、降低成本，自动化、智能化的资源调度管理系统非常关键。</p>
<p>由于租户对ECS实例（虚拟机，VM）请求的行为具有一定规律，可以通过对历史ECS实例请求的分析，预测到未来一段时间的ECS实例请求，然后对预测的请求分配资源（如图1所示），这样可以找到一个接近最优的分配策略，实现资源最大化利用，同时也能参考预测的结果制定云数据中心的建设计划。<br><img src="http://ols4zt49w.bkt.clouddn.com/1524988789%281%29.png" alt=""><br>赛题更加详细的信息请参考2018华为软件精英挑战赛官网 <a href="http://codecraft.devcloud.huaweicloud.com/home/detail" target="_blank" rel="external">http://codecraft.devcloud.huaweicloud.com/home/detail</a></p>
<p>比赛赛题主要可以分成两个步骤：<br>1、根据历史虚拟机请求数量预测接下来几天的各类虚拟机请求数量（主要通过机器学习方法）。<br>2、将预测出来的虚拟机放置进规定规格的物理服务器中，使得物理服务器的资源（CPU或者内存）利用率最高。</p>
<h4 id="比赛体验"><a href="#比赛体验" class="headerlink" title="比赛体验"></a><strong>比赛体验</strong></h4><p>比赛刚开始时，我和舍友看到华为官方推送了相关比赛信息，于是就想试试，毕竟之前还没参加过类似纯算法的比赛（虽然后期觉得算法，代码能力，运气各占5：4：1）。正好之前另一个同学也提过这个比赛，于是我两便叫上他一起组队了。</p>
<p>首先便是分工问题，由于是团队赛，分工好坏其实对团队的效率和成绩起到关键作用，幸运的是我们分工还是比较好的，一个人负责文件的读取和数据的去噪，一个人负责训练数据并预测模型部分，还有一个人负责最后的放置问题。在比赛过程中我们每天吃饭的时候都会一起交流，相互交流自己的ideal，我觉得这是一个团队所必需的，因为有时可能别人能发现你没有考虑到的问题，同时在交流中也能互相学到东西。</p>
<p>在比赛中我感受到了平时的知识长时间不用是会遗忘的，虽然之前接触过c++的STL，但是由于平时用c用的比较多，比赛时大部分都遗忘了，虽然官方也支持用c实现，但是在实际撸码中发现STL能为我们提供很多方便。</p>
<p>第二，在比赛中我也感受到了竞争的激烈，可能今天你还在榜上前四，过了一晚你就掉出前十了，毕竟喜欢熬夜的大佬还是很多的，这也激励着我们进一步的改善优化，毕竟不到最后一刻结局还是个未解之谜。</p>
<h4 id="比赛收获"><a href="#比赛收获" class="headerlink" title="比赛收获"></a><strong>比赛收获</strong></h4><p>在比赛中我主要负责数据的训练和预测模型的建立，预测模型很多，但是每种不一定都适合时间序列预测。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">1、多元线性回归模型</div><div class="line">线性回归可谓是世界上最知名的建模方法之一，也是我们第一个接触的模型。线性回归用最适直线(回归线)去建立因变量Y和一个或多个自变量X之间的关系。可以用公式来表示：</div><div class="line">   Y=a+b*X+e</div><div class="line">   a为截距，b为回归线的斜率，e是误差项。</div><div class="line">   简单线性回归与多元线性回归的差别在于：多元线性回归有多个(&gt;1)自变量，而简单线性回归只有一个自变量。到现在我们的问题就是：如何找到那条回归线？</div><div class="line">   </div><div class="line">我们可以通过最小二乘法把这个问题解决。其实最小二乘法就是线性回归模型的损失函数，只有把损失函数做到最小时得出的参数，才是我们最需要的参数。损失函数我们可以采用差方和。</div><div class="line"></div><div class="line">重点：</div><div class="line">1.自变量与因变量之间必须要有线性关系。</div><div class="line">2.多重共线性、自相关和异方差对多元线性回归的影响很大。</div><div class="line">3.线性回归对异常值非常敏感，其能严重影响回归线，最终影响预测值。（因此在训练数据前需要做好去噪，我们采用过平均滤波，高斯滤波等，最终采用的是高斯滤波）</div><div class="line"></div><div class="line">调试过程中遇到的问题并做的小结：</div><div class="line">多元回归：</div><div class="line">1、循环预测N次，将N天数据累加。(后来事实证明不能将最先预测的数据带入，重新训练生成新的参数，从而生成新的预测数据。)</div><div class="line">2、动态申请二维数组，将每天的数据赋值给它。（原先定义的时候是长度固定的数组，可以存放100天的数据，但是实际上可能没有这么多的天数，所以后面没数据的天数数据会全部为初始值0，影响训练效果。）</div><div class="line">3、N天和作为输入，训练预测N天的和。（后来效果没有一天一天预测的效果好）</div><div class="line">4、降噪完在存入数据。</div></pre></td></tr></table></figure>
<p>关于其他回归模型，有兴趣的可以参考一些博文：<br><a href="https://blog.csdn.net/zc02051126/article/details/54709096" target="_blank" rel="external">https://blog.csdn.net/zc02051126/article/details/54709096</a><br><a href="https://www.jianshu.com/p/15dd20f8d02c" target="_blank" rel="external">https://www.jianshu.com/p/15dd20f8d02c</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">2、指数平滑预测</div><div class="line">我们初赛用的是二次的，复赛用的是三次的。</div><div class="line">一次指数平滑实际就是对历史数据的加权平均，它可以用于任何一种没有明显函数规律，但确实存在某种前后关联的时间序列的短期预测。</div><div class="line">局限性：</div><div class="line">第一，预测值不能反映趋势变动、季节波动等有规律的变动；</div><div class="line">第二，这种方法多适用于短期预测，而不适合作中长期的预测；</div><div class="line">第三，由于预测值是历史数据的均值，因此与实际序列的变化相比有滞后现象。</div><div class="line"></div><div class="line">二次指数</div><div class="line">二次指数平滑是对一次指数平滑的再平滑。它适用于具有线性趋势的时间数列。（一次指数平滑没有考虑历史数据变化趋势对当前预测值的影响， 因此无法预测趋势）</div><div class="line"></div><div class="line">三次指数</div><div class="line">1. 与前两种相比，我们多考虑一个因素：季节性效应（ Seasonality）。这种平均模型考虑的季节性效应，在股票或者期货价格中都会比较常见，比如  在过年前A股市场通常会交易比较频繁，在小麦成熟的时候   小麦期货价格   也会有比较明显的波动。</div><div class="line"></div><div class="line">在尝试此模型的过程中，平滑系数a的选取至关重要，我们后来尝试了用暴力解法来确定a，但是如果将a从0-1之间每0.001累加从而暴力求解的话会发现有时会超时，因此我后来在0-1之间截取不同段从而确定最佳的平滑系数在那个区间，从而减少暴力求解的时间。同时，对于不同的去噪方式，对平滑系数的选取都会有一定的影响。</div><div class="line"></div><div class="line">注意：</div><div class="line">1、指数平滑预测只适合中短期的时间序列预测，预测时间过长或预测起始时间和训练数据结束时间间隔太久时，会影响它的准确度。</div><div class="line">2、复赛时，由于预测起始时间和所给训练数据间存在间隔T,为了避免误差过大，可采用累加N天数据的和做为训练数据。</div><div class="line">   主要分两步：N1=T，预测出紧挨着训练数据的 T天的数据和data1; N2=T+预测天数，预测出紧挨着训练数据的 T+预测天数 天的数据和data2；最后data2-data1即为预测天数的数据和。</div></pre></td></tr></table></figure>
<p>对于指数平滑预测模型感兴趣的还可以参考以下博文：<br><a href="https://www.cnblogs.com/TTyb/p/5716125.html" target="_blank" rel="external">https://www.cnblogs.com/TTyb/p/5716125.html</a><br><a href="https://www.cnblogs.com/devilmaycry812839668/p/6935167.html" target="_blank" rel="external">https://www.cnblogs.com/devilmaycry812839668/p/6935167.html</a></p>
<p>至于其他模型，我们还试过最佳拟合直线（和简单线性回归类似）；bp神经网络；adaboost(二分类模型)等。在此处就不再一一展开了，有兴趣的可以自己查阅相关资料。<br><a href="https://blog.csdn.net/Pruett/article/details/68951232" target="_blank" rel="external">最佳拟合直线</a><br><a href="https://blog.csdn.net/guyuealian/article/details/70995333" target="_blank" rel="external">Adaboost算法原理分析和实例</a></p>
<p>附：在和大佬的交流中，我发现杭电大部人人都用的ARIMA模型（自回归移动平均），但是由于时间原因我并没有仔细研究，有兴趣的人可以试试。</p>
<p>最后，附上个人观点，其实每种模型都有各自的优缺点，不管你尝试哪种模型，只要你想办法去优化模型，针对具体数据去改善模型都能取得不错的成绩。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">3、装箱问题</div><div class="line">这部分主要是由队友做的，我们一开始采用的是最简单的方法（也是官方文档示例方法）是贪心+首次适应法（FF算法），即将所有的虚拟机按次序放入物理服务器中，对于每个虚拟机，检查服务器资源是否足够放下该虚拟机，如果可以放下就将其放在这台服务器上，如果服务器剩余资源不足以放下该虚拟机，则新建一台服务器，将虚拟机放入新建的服务器……直到最后放置完所有的虚拟机，将每个服务器放置的虚拟机输出即可。</div><div class="line">显然，首次适应方法有个弊端，可能会造成每个服务器都有挺多资源剩余，但是却无法被后来的虚拟机利用。由于在采用首次适应法的前提下，虚拟机放置方式只与虚拟机初始排列顺序有关，所以我们可以用智能算法对初始排列顺序进行优化，求得接近最优解的解。</div><div class="line"></div><div class="line">后来我们采用模拟退火算法进行最优解的寻找，模拟退火算法（Simulated Annealing Algorithm）用于优化问题的出发点是基于物理中固体物质的退火过程与一般优化问题的相似性，虽然模拟退火法能够提高利用率，但是有时评估次数设置的过多可能会导致程序超时（60s），而且到后期发现退火的利用率也到极限了（cpu和内存比值）。</div><div class="line"></div><div class="line">后来和其他队的交流，想要尽快放满一台服务器，可以尝试动态规划（DP）和最佳适应法。最终我们写了六种放置方法，并在调用前判断哪种的利用率高，然后调用哪种。（哈哈哈，也是厉害了，居然想到了这种方法。。。）</div></pre></td></tr></table></figure>
<p>作为第一次参加类似的比赛（纯算法），我还是感触颇深的，也认识到了自己和大佬间的差距，希望以后有机会再一较高下吧。<br>代码地址：<a href="https://github.com/shalian123/HuaweiCodeCraft" target="_blank" rel="external">https://github.com/shalian123/HuaweiCodeCraft</a><br>欢迎各位交流给星哦~</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/12/静态库和共享库/" itemprop="url">
                  静态库和共享库
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-11-12T22:23:46+08:00" content="2017-11-12">
              2017-11-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unix-C/" itemprop="url" rel="index">
                    <span itemprop="name">Unix-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/11/12/静态库和共享库/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/12/静态库和共享库/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="共享库（动态链接库、动态库）和静态库"><a href="#共享库（动态链接库、动态库）和静态库" class="headerlink" title="共享库（动态链接库、动态库）和静态库"></a>共享库（动态链接库、动态库）和静态库</h4><p>商业开发中，经常会把程序打包成一个库文件，进行整合和管理，库分为：静态库和共享库。库是 .o 文件的打包。</p>
<font color="#0088ff" size="5" face="黑体"><br>在windows中静态库是以 .lib 为后缀的文件，共享库是以 .dll 为后缀的文件。在linux中静态库是以 .a 为后缀的文件，共享库是以 .so为后缀的文件<br></font>

<p>静态库是 代码的归档，在使用时会复制代码到目标文档中。<br>     ==优点是：独立在连接完成以后就不再需要静态库了，速度稍快<br>     缺点是：占用空间太大，修改和维护不方便==</p>
<p>共享库在使用时会把代码的地址放入目标文件中。（<strong>商业开发主流使用共享库</strong>）<br>     ==优点是：占用空间小，修改和维护方便<br>     缺点是：在程序运行时必须找到共享库，速度稍慢==</p>
<h5 id="静态库的创建步骤："><a href="#静态库的创建步骤：" class="headerlink" title="静态库的创建步骤："></a><strong>静态库的创建步骤：</strong></h5><p>1、编写源程序add.c<br>2、编译源程序，生成目标文件（.o）<br>      <code>gcc -c add.c     (预处理和编译，不链接)</code><br>3、生成静态库文件 .a<br>     <code>ar     -r     库文件名    所有的.o        //（库文件名： lib开头，.a 结尾，中间放库名）</code><br>    <code>ar     -r    libmyku.a   add.o add1.o</code></p>
<h5 id="静态库的使用步骤："><a href="#静态库的使用步骤：" class="headerlink" title="静态库的使用步骤："></a><strong>静态库的使用步骤：</strong></h5><p>1、编写使用程序test.c<br>2、编译test.c，生成 目标文件       <code>gcc -c test.c</code><br>3、链接静态库文件和test.o，有三种方法：<br>     <strong>3.1    直接连接</strong>        <code>//gcc test.o libmyku.a</code><br>    <strong> 3.2     双L链接法    (重点)</strong><br>              <code>gcc   test.o   -l库名   -L库所在目录</code><br>              <code>gcc   test.o   -lmyku   -L.</code><br>    <strong> 3.3     单l链接法</strong><br>    （配置环境变量LIBRARY_PATH）export LIBRARY_PATH=<strong>.</strong> <em>（。表示当前目录）</em><br>               方法：配置环境变量LIBRARY_PATH，把库所在目录配置<br>               <code>gcc  test.o  -lmyku</code><br>注意：编写商业代码，需要提供一个库文件和一个头文件</p>
<h5 id="共享库的创建步骤："><a href="#共享库的创建步骤：" class="headerlink" title="共享库的创建步骤："></a><strong>共享库的创建步骤：</strong></h5><p>1、写源程序add.c<br>2、编译生成目标文件.o<br>    <code>gcc -c -fpic add.c     (-fpic不写也行)</code><br>3、生成共享库文件.so<br>     <code>gcc   -shared   add.o   -o libmyku.so</code>   //（库文件名和静态库只有后缀不一样，有些系统用 .so.整数）</p>
<h5 id="共享库的使用步骤："><a href="#共享库的使用步骤：" class="headerlink" title="共享库的使用步骤："></a><strong>共享库的使用步骤：</strong></h5><p>和静态库一样！<br>运行时必须配置环境变量LD_LIBRARY_PATH。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ldd  a.out     可以查看相关的共享文件</div><div class="line">系统提供了一套API（应用程序接口，就是各种函数）可以直接打开共享库文件</div><div class="line">dlopen()   - 打开库文件</div><div class="line">dlsym()     -从打开的库文件中得到函数</div><div class="line">dlclose()   -关闭</div><div class="line">dlerror()    -判断是否出错</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/12/错误处理/" itemprop="url">
                  错误处理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-11-12T22:12:52+08:00" content="2017-11-12">
              2017-11-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unix-C/" itemprop="url" rel="index">
                    <span itemprop="name">Unix-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/11/12/错误处理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/12/错误处理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>主流的编程语言（除了C语言）基本都使用 异常机制 处理错误，C语言中没有异常机制。<br>C程序员是用 返回值 代表是否出错。主要有以下4种情况<br>1、如果返回类型是int，并且返回值不可能是负数，数据会正常返回，返回 -1 代表出错。<br>2、如果返回类型是int ，并且返回值可能是负数，返回-1代表出错，0代表正确。数据用指针返回。<br>3、如果返回类型是指针，返回NULL代表出错，其他代表正常返回数据<br>4、如果函数不需要考虑出错问题，用 void 做返回值。</p>
<p>注意：以上4种情况只是经验总结，不是绝对的<br>一个函数返回数据的方法有2种：<br>1、用return语句返回<br>2、参数中放入一个指针，也可以带回数据</p>
<p>C语言用 外部的全局变量 errno 记录错误的信息，错误信息分为 错误编号（int）和具体信息（字符串），每个错误编号都对应一个具体信息。errno存的是错误编号。</p>
<p>==     函数strerror()/perror()/printf()用于错误信息的显示和转换。<br>     strerror()传入一个编号，返回具体信息（转换函数） 不一定要出错，给个errno就行<br>     perror() 不用传入错误编号，直接打印errnod对应的信息（自动换行）<br>     printf(“%m”)直接打印errno对应的信息==<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"%s\n"</span>,strerror(errno));</div><div class="line">perror(<span class="string">"fopen"</span>);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%m\n"</span>)</div></pre></td></tr></table></figure></p>
<p>不是所有的函数都只用errno 处理错误，比如 线程的函数。<br>errno只有咋出错时才改变值，不出错不会回复值。因此errno只能说明出了什么错，而不能判断是否出错。判断是否出错使用函数的返回值，出错以后再使用errno。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/12/链式结构/" itemprop="url">
                  链式结构
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-11-12T20:58:51+08:00" content="2017-11-12">
              2017-11-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/数据结构/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/11/12/链式结构/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/12/链式结构/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本篇文章是之前在Evernote上总结的一篇文章，此处将它移植到博客上，也算是一个备份<br><a href="http://ols4zt49w.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%9501.html" target="_blank" rel="external">链式结构</a></p>
<p><strong>下面是具体内容，截图上传，方便查阅，具体内容可点击上面的链接</strong></p>
<p><img src="http://ols4zt49w.bkt.clouddn.com/1510492311%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492337%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492403%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492425%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492648%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492662%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492755%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492780%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492867%281%29.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/1510492874%281%29.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/12/java-OOP/" itemprop="url">
                  java-OOP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-11-12T14:49:40+08:00" content="2017-11-12">
              2017-11-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java学习/" itemprop="url" rel="index">
                    <span itemprop="name">java学习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/11/12/java-OOP/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/12/java-OOP/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天同步的是java面向对象部分的知识，还是从我之前用印象笔记记录的。同步过程中一些图片没法完善只能在每一节目录下加上相关的图片。</p>
<h4 id="java-OOP"><a href="#java-OOP" class="headerlink" title="java-OOP"></a><a href="http://ols4zt49w.bkt.clouddn.com/java-OOP_index.html" target="_blank" rel="external">java-OOP</a></h4><p> <a href="http://ols4zt49w.bkt.clouddn.com/%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB%EF%BC%88%E4%B8%8A%EF%BC%89.html" target="_blank" rel="external">对象和类（上）</a></p>
<p> <img src="http://ols4zt49w.bkt.clouddn.com/%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E9%BB%98%E8%AE%A4%E5%88%9D%E5%A7%8B%E5%80%BC.png" alt="在java中引用类型（除去那八个基本类型）的默认值都是null"></p>
<p> <img src="http://ols4zt49w.bkt.clouddn.com/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC.png" alt=""></p>
<p> <img src="http://ols4zt49w.bkt.clouddn.com/new%E5%87%BA%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%9C%A8%E5%A0%86%E4%B8%AD%EF%BC%8C%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E5%9C%A8%E6%A0%88%E4%B8%AD.png" alt="局部变量内存分配在栈中；
new出的对象在堆中；
"></p>
<p> <a href="http://ols4zt49w.bkt.clouddn.com/%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB%EF%BC%88%E4%B8%8B%EF%BC%89%E3%80%81%E6%95%B0%E7%BB%84%EF%BC%881%EF%BC%89.html" target="_blank" rel="external">对象和类（下）、数组</a></p>
<p> <a href="http://ols4zt49w.bkt.clouddn.com/%E5%AF%B9%E8%B1%A1%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E3%80%81%E7%BB%A7%E6%89%BF%E7%9A%84%E6%84%8F%E4%B9%89%EF%BC%88%E4%B8%8A%EF%BC%89.html" target="_blank" rel="external">对象内存管理、继承的意义（上）</a></p>
<p> <img src="http://ols4zt49w.bkt.clouddn.com/%E5%A0%86.png" alt="堆"><br> <img src="http://ols4zt49w.bkt.clouddn.com/V@~C%7D0B%60%60V$QW%28~%259~YX9K9.png" alt=""></p>
<p> <img src="http://ols4zt49w.bkt.clouddn.com/%E5%90%91%E4%B8%8A%E9%80%A0%E5%9E%8B.png" alt="向上造型"></p>
<p> <a href="http://ols4zt49w.bkt.clouddn.com/%E7%BB%A7%E6%89%BF%E7%9A%84%E6%84%8F%E4%B9%89%EF%BC%88%E4%B8%8B%EF%BC%89%E3%80%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E3%80%81static%E3%80%81final.html" target="_blank" rel="external">继承的意义（下）、访问控制、static、final</a></p>
<p> <a href="http://ols4zt49w.bkt.clouddn.com/%E6%8A%BD%E8%B1%A1%E7%B1%BB%E3%80%81%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%86%85%E9%83%A8%E7%B1%BB%EF%BC%88%E4%B8%8A%EF%BC%89.html" target="_blank" rel="external">抽象类、接口和内部类（上）</a></p>
<p> <a href="http://ols4zt49w.bkt.clouddn.com/%E6%8A%BD%E8%B1%A1%E7%B1%BB%E3%80%81%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%86%85%E9%83%A8%E7%B1%BB%EF%BC%88%E4%B8%8B%EF%BC%89%E3%80%81%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%B1%87%E6%80%BB.html" target="_blank" rel="external">抽象类、接口和内部类（下）、面向对象汇总</a></p>
<p> <img src="http://ols4zt49w.bkt.clouddn.com/%E6%8E%A5%E5%8F%A3%E4%B8%8E%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%8C%BA%E5%88%AB.png" alt="接口和抽象类的区别"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/10/java基础/" itemprop="url">
                  java基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-11-10T22:01:15+08:00" content="2017-11-10">
              2017-11-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java学习/" itemprop="url" rel="index">
                    <span itemprop="name">java学习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/11/10/java基础/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/10/java基础/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近利用课余时间在看达内的整套java学习视频，在学习过程中，学习笔记一直采用的是印象笔记，本来早就想把笔记同步到博客上，但是一直没有想到好的方法。经过我不停琢磨，终于找到一个方法，虽然有些图片没法达到我想要的效果，但是也能基本实现同步的效果。具体笔记见每个知识点的链接。(<strong>后期，等到全部学完我会将完整笔记上传至github上</strong>)</p>
<h5 id="java基础目录"><a href="#java基础目录" class="headerlink" title="java基础目录"></a><a href="http://ols4zt49w.bkt.clouddn.com/java%E5%9F%BA%E7%A1%80_index.html" target="_blank" rel="external">java基础目录</a></h5><p><a href="http://ols4zt49w.bkt.clouddn.com/java%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" target="_blank" rel="external">java开发环境</a></p>
<p><a href="http://ols4zt49w.bkt.clouddn.com/%E5%8F%98%E9%87%8F%E3%80%81java%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B.html" target="_blank" rel="external">变量、java基本类型</a><br><img src="http://ols4zt49w.bkt.clouddn.com/Image%20%5B1%5D.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/Image%20%5B2%5D.png" alt=""><br><img src="http://ols4zt49w.bkt.clouddn.com/Image.png" alt=""></p>
<p><a href="http://ols4zt49w.bkt.clouddn.com/%E8%BF%90%E7%AE%97%E7%AC%A6%E5%8F%8A%E8%A1%A8%E8%BE%BE%E5%BC%8F%E3%80%81%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84.html" target="_blank" rel="external">运算符及表达式、分支结构</a></p>
<p><a href="http://ols4zt49w.bkt.clouddn.com/%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84.html" target="_blank" rel="external">循环结构</a></p>
<p><a href="http://ols4zt49w.bkt.clouddn.com/%E5%BE%AA%E7%8E%AF%E9%97%AE%E9%A2%98%E3%80%81%E6%95%B0%E7%BB%84.html" target="_blank" rel="external">循环问题、数组</a></p>
<p><a href="http://ols4zt49w.bkt.clouddn.com/%E6%96%B9%E6%B3%95%E3%80%81%E7%8C%9C%E5%AD%97%E6%AF%8D%E6%B8%B8%E6%88%8F.html" target="_blank" rel="external">方法、猜字母游戏</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/10/30/全局变量、局部变量、静态全局变量、静态局部变量的区别/" itemprop="url">
                  全局变量、局部变量、静态全局变量、静态局部变量的区别
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-10-30T12:05:29+08:00" content="2017-10-30">
              2017-10-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/10/30/全局变量、局部变量、静态全局变量、静态局部变量的区别/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/10/30/全局变量、局部变量、静态全局变量、静态局部变量的区别/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>C++变量根据定义位置的不同，具有不同的作用域，作用域可分为6种：全局作用域，局部作用域，语句作用域，类作用域，命名作用域和文件作用域。</p>
<h4 id="从作用域看："><a href="#从作用域看：" class="headerlink" title="从作用域看："></a>从作用域看：</h4><p><strong>全局变量</strong>具有全局作用域。全局变量只需在一个源文件中定义，就可以作用于所有的源文件。当然，其他不包括全局变量定义的源文件需要用extern关键字再次声明这个全局变量。</p>
<p><strong>静态局部变量</strong>具有局部作用域。它只被初始化一次，自从第一次初始化直到程序与你新内阁结束都一直存在，他和全局变量的区别在于全局变量对所有的函数都是可见的，而静态局部变量只对定义自己的函数体始终可见。<strong>(一般用来充当函数的返回值</strong>)</p>
<p><strong>局部变量</strong>也只有局部作用域，他是自动对象，他在程序运行期间不是一直存在，而是只在函数执行期间存在，函数的一次调用结束后，变量就被撤销，其所占用的内存也被收回。</p>
<p><strong>静态全局变量</strong>也具有全局作用域，他与全局变量的区别在于如果程序包含多个文件的话，他作用于定义它的文件里，不能作用到其他文件里，即被static关键字修饰过的变量具有<strong>文件作用域</strong>。这样即使两个不同的源文件都定义了相同的静态全局变量，他们也是不同的变量。</p>
<h4 id="从分配内存空间看："><a href="#从分配内存空间看：" class="headerlink" title="从分配内存空间看："></a>从分配内存空间看：</h4><p>全局变量、静态局部变量、静态全局变量都在静态存储区分配空间，而局部变量在栈分配空间。</p>
<p>全局变量本身就是静态存储方式，静态全局变量当然也是静态存储方式。这两者在存储方式上没有什么不同。<br><strong>区别在于</strong>非静态全局变量的作用域是整个源程序，当一个源程序由多个源文件组成时，非静态的全局变量在各个源文件中都是有效的。<br>而静态全局变量则限制了其作用域，即只在定义该变量的源文件内有效，在同一源程序的其他源文件中不能使用它。由于静态全局变量的作用域局限于一个源文件内，只能为该源文件内的函数公用，因此可以避免在其他源文件中引起错误。<br>1、<strong>静态变量</strong>会被放在程序的<strong>静态数据存储区</strong>里，<strong>这样可以在下一次调用的时候还可以保持原来的赋值。这一点是他与堆栈变量和堆变量的区别</strong><br>2、<strong>变量用static告知编译器，自己仅仅在变量的作用域范围内可见。这一点是他与全局变量的区别。</strong><br>从以上分析可以看出，把局部变量改变为静态变量后是改变了他的存储方式，即改变了他的生存期。把全局变量改变为静态变量后是改变了他的作用域，限制了他的使用范围，因此static这个说明符在不同的地方起的作用是不同的。</p>
<h4 id="TIPS："><a href="#TIPS：" class="headerlink" title="TIPS："></a>TIPS：</h4><p>1、若全局变量仅在单个文件中访问，则可以讲这个变量修改为静态全局变量。<br>2、若全局变量仅在单个函数中使用，则可以将这个变量修改为该函数的静态局部变量。<br>3、全局变量、静态局部变量、静态全局变量都存放在静态数据存储区。<br>4、函数中必须要使用static变量的情况：当某函数的返回值为指针类型时，则必须是static的局部变量的地址作为返回值，若为auto类型，则返回为错指针。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/3812b31bb051f8196c5029e9d8b44aed2e73e718.jpg"
               alt="shalian" />
          <p class="site-author-name" itemprop="name">shalian</p>
          <p class="site-description motion-element" itemprop="description">记录生活点滴</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">57</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">68</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shalian123" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/3329000660/home?wvr=5" target="_blank" title="新浪微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  新浪微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-pinterest"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.baidu.com/" title="百度" target="_blank">百度</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://harmansecurity.cn/" title="harman" target="_blank">harman</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.codecooler.tech/" title="DoRin" target="_blank">DoRin</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shalian</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"shalian"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
